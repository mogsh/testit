webpackJsonp([18],{284:function(e,t,a){"use strict";function l(e){n||a(575)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(393),i=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);var o=a(577),n=!1,d=a(21),u=l,c=d(i.a,o.a,!1,u,"data-v-e5bdbfec",null);c.options.__file="src\\component\\admin\\wxapp\\checkCarousel.vue",t.default=c.exports},393:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{imgApi:this.$imgApi,query:{pageNum:1,pageSize:20,hasAdd:0},multipleSelection:[],goodsData:{},val2:"",val3:"",val4:[],val5:"",val6:"",keepTime:[],imgList:[{name:"carsouelImg",url:""}],ruleForm:{},rules:{title:[{required:!0,message:"请输入内容",trigger:"blur"}],imgItem:[{required:!0,message:"请输入内容",trigger:"blur"}],keepTime:[{required:!0,message:"请输入内容",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1,options3:[],options4:[],options5:[],options6:[{value:1,label:"已添加"},{value:0,label:"未添加"}],value8:"",adImageId:"",tableData:[],currentPage:1}},methods:{addBtn:function(){this.$router.push({path:"/wxapp/muladdcarouselgoods",query:{adImageId:this.ruleForm.adImageId}})},checkGoods:function(e){this.$router.push({name:"gcg",params:{goodsId:e.goodsId,storeId:e.storeId}})},delGoods:function(e){var t=this;this.ruleForm.jumpTypeParam="",this.$http.get(this.$api.deleteAdImageNameId,{params:{adImageId:this.ruleForm.adImageId,goodsIds:e.goodsId}}).then(function(e){e.data.flag&&(t.getImageDetail(),t.$message({type:"warning",message:"删除成功!"}))})},delOneGoods:function(e){var t=this;this.$confirm("是否删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delGoods(e)}).catch(function(){t.$message({type:"info",message:"已取消删除操作"})})},delSelected:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("是否批量删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t="";e.multipleSelection.forEach(function(e,a){t=e.goodsId+","+t}),e.$http.get(e.$api.deleteAdImageNameId,{params:{adImageId:e.ruleForm.adImageId,goodsIds:t}}).then(function(t){t.data.flag&&(e.getImageDetail(),e.$message({type:"warning",message:"删除成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},searchVal2:function(){},selectVal3:function(){},selectVal4:function(){},selectVal5:function(){},selectTime:function(){this.keepTime?(this.ruleForm.beginUseTime=this.keepTime[0],this.ruleForm.endUseTime=this.keepTime[1].substring(0,10)+" 23:59:59"):this.ruleForm.beginUseTime=this.ruleForm.endUseTime=""},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e,this.getImageDetail()},handleCurrentChange:function(e){this.pageNum=e,this.getImageDetail()},handleRemove:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},cancel:function(){var e=this;this.$confirm("取消后将放弃修改，返回上一页面，请确认是否取消？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"取消成功!"}),e.$router.go(-1)}).catch(function(){e.$message({type:"info",message:"放弃 [取消] 操作!"})})},saveAndAdd:function(){this.$message({type:"success",message:"保存成功!"})},offLine:function(){var e=this,t=this.ruleForm.isUp;this.$http.get(this.$api.upAdImage,{params:{adImageId:this.ruleForm.adImageId,isUp:t}}).then(function(a){"success"==a.data.msg?(e.$message({type:"success",message:1==t?"下线成功！":"上线成功！"}),1==e.ruleForm.isUp?e.ruleForm.isUp=0:e.ruleForm.isUp=1):e.$message({type:"error",message:1==t?"下线失败！":"上线失败！"})})},addGoods:function(){var e=this,t=this;this.$http.get(this.$api.findGoodsIdByGoodsCode,{params:{goodsCode:this.val1}}).then(function(a){if(a.data.flag){var l=a.data.data;e.$http.get(e.$api.insertAdImageGoods,{params:{adImageId:e.ruleForm.adImageId,goodsId:l}}).then(function(a){a.data.flag?e.$http.get(e.$api.findGoods,{params:{goodsId:l,storeId:0}}).then(function(a){var l={},r=a.data.data;l.goodsName=r.goodsName,l.goodsCode=r.goodsCode,l.brandName=r.brandName,l.goodsCategoryName=r.goodsCategoryName,l.sellingPrice=r.sellingPrice,l.inventory=r.inventory,l.isUp=r.isUp,l.sort=r.sort,l.goodsId=r.goodsId,e.tableData.push(l),t.ruleForm.jumpTypeParam="",e.tableData.forEach(function(e,a){t.ruleForm.jumpTypeParam=e.goodsId+","+t.ruleForm.jumpTypeParam})}):e.$message({type:"error",message:a.data.msg})})}else e.$message({type:"warning",message:a.data.msg})})},uploadImgHandler:function(e){this.imgShow=!1,this.ruleForm.imgUrl=e.data[0].fileUrl},getCategoryData:function(){var e=this;this.$http.get(this.$api.findGoodsCategoryList).then(function(t){var a=t.data.data,l=function(e){for(var t=e,a=e.length,l=[],r=0;r<a;r++){var i={};if(i.value=t[r].id,i.label=t[r].name,null!=t[r].children){i.childrentemp=t[r].children,i.children=[];for(var s=0;s<i.childrentemp.length;s++){var o={};if(o.value=i.childrentemp[s].id,o.label=i.childrentemp[s].name,i.children.push(o),null!=i.childrentemp[s].children){o.children=[],o.childrentemp=i.childrentemp[s].children;for(var n=0;n<o.childrentemp.length;n++){var d={};d.value=o.childrentemp[n].id,d.label=o.childrentemp[n].name,o.children.push(d)}}}l[r]=i}else l[r]=i}return l}(a);e.options4=l})},getShopData:function(){var e=this;this.$http.get(this.$api.findStoreList).then(function(t){for(var a in t.data.data){var l={};l.value=a,l.label=t.data.data[a],e.options3.push(l)}})},updateAdImage:function(){var e=this,t={};t.adImageId=this.ruleForm.adImageId,t.sort=this.ruleForm.sort,t.title=this.ruleForm.title,t.beginUseTime=this.ruleForm.beginUseTime,t.endUseTime=this.ruleForm.endUseTime,t.jumpUrl=this.ruleForm.jumpUrl,t.imgUrl=this.ruleForm.imgUrl,t.jumpType=this.ruleForm.jumpType,t.jumpTypeParam=this.ruleForm.jumpTypeParam,this.$http.get(this.$api.updateAdImage,{params:t}).then(function(t){"success"==t.data.msg&&(e.$message({type:"success",message:"保存成功！"}),e.$router.go(-1))})},getImageDetail:function(){var e=this;this.$http.get(this.$api.findAdImageByAdImageId,{params:{adImageId:this.adImageId}}).then(function(t){e.ruleForm=t.data.data,e.keepTime.push(t.data.data.beginUseTime),e.keepTime.push(t.data.data.endUseTime),t.data.data.pagex&&(e.tableData=t.data.data.pagex.list),e.imgList[0].url=t.data.data.imgUrl})}},created:function(){var e=this.$route.query.adImageId;this.adImageId=e,this.getImageDetail(),this.getCategoryData(),this.getShopData()}}},575:function(e,t,a){var l=a(576);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(20)("8eb10e10",l,!1)},576:function(e,t,a){t=e.exports=a(7)(!1),t.push([e.i,"\n.btn-group[data-v-e5bdbfec],\n.search-group[data-v-e5bdbfec] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-e5bdbfec] {\n  float: right;\n}\n.content .content-title[data-v-e5bdbfec] {\n  font-size: 18px;\n  font-family: MicrosoftYaHei-Bold;\n  color: #606266;\n  font-weight: bold;\n  margin: 0 10px 20px;\n}\n",""])},577:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[e._v("轮播图管理")]),e._v(" "),a("el-breadcrumb",e._l(e.$route.meta.bread,function(t,l){return a("el-breadcrumb-item",{key:l},[e._v(e._s(t))])}))],1),e._v(" "),a("div",{staticClass:"content content1 addcarousel"},[a("div",{staticClass:"content-title"},[e._v("填写轮播图信息")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"轮播图标题",prop:"title",width:"120"}},[a("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"==typeof t?t.trim():t)},expression:"ruleForm.title"}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"addcarousel-pic-input",staticStyle:{height:"180px"}},[a("el-col",[a("el-form-item",{attrs:{label:"轮播图图片",prop:"imgItem",width:"180"}},[a("el-upload",{attrs:{action:e.imgApi,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.uploadImgHandler,"file-list":e.imgList,limit:1}},[a("i",{staticClass:"el-icon-plus"}),e._v(" "),a("div",{staticClass:"el-upload__tip orange-txt",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                                **图片尺寸：750*360px；格式:jpg、png；大小：200KB以内\n                            ")])]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"持续时间",prop:"createTime",width:"240"}},[a("el-col",{attrs:{span:8}},[a("el-date-picker",{attrs:{clearable:"",type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.selectTime},model:{value:e.keepTime,callback:function(t){e.keepTime=t},expression:"keepTime"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"排序号"}},[a("el-input",{attrs:{type:"number",width:"150"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-radio",{attrs:{label:1},model:{value:e.ruleForm.moduleType,callback:function(t){e.$set(e.ruleForm,"moduleType",t)},expression:"ruleForm.moduleType"}},[e._v("轮播图")]),e._v(" "),a("el-radio",{attrs:{label:3},model:{value:e.ruleForm.moduleType,callback:function(t){e.$set(e.ruleForm,"moduleType",t)},expression:"ruleForm.moduleType"}},[e._v("广告图")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跳转方式"}},[a("el-radio",{attrs:{label:2},model:{value:e.ruleForm.jumpType,callback:function(t){e.$set(e.ruleForm,"jumpType",t)},expression:"ruleForm.jumpType"}},[e._v("链接")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.ruleForm.jumpType,callback:function(t){e.$set(e.ruleForm,"jumpType",t)},expression:"ruleForm.jumpType"}},[e._v("商品")])],1)],1)],1),e._v(" "),"2"==e.ruleForm.jumpType?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"跳转链接",prop:"tapUrl"}},[a("el-input",{model:{value:e.ruleForm.jumpUrl,callback:function(t){e.$set(e.ruleForm,"jumpUrl",t)},expression:"ruleForm.jumpUrl"}})],1)],1)],1):e._e(),e._v(" "),"1"==e.ruleForm.jumpType?a("el-row",[a("el-col",[a("el-button",{staticClass:"purple-bg",on:{click:e.updateAdImage}},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:e.cancel}},[e._v("取消")])],1)],1):e._e()],1)],1),e._v(" "),"1"==e.ruleForm.jumpType?a("div",{staticClass:"content content1"},[a("div",{staticClass:"content-title"},[e._v("编辑轮播图跳转商品列表")]),e._v(" "),a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"purple-bg",attrs:{icon:"el-icon-plus"},on:{click:e.addBtn}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"search-group"},[a("el-input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"搜索商品名称/编号/品牌","prefix-icon":"el-icon-search"},on:{blur:e.searchVal2},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchVal2(t)}},model:{value:e.val2,callback:function(t){e.val2="string"==typeof t?t.trim():t},expression:"val2"}}),e._v(" "),a("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:e.options4,"change-on-select":""},on:{change:e.selectVal4},model:{value:e.val4,callback:function(t){e.val4=t},expression:"val4"}})],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","default-sort":{prop:"brand",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCategoryName",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"销售价(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inventory",label:"库存量(件)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isUp",label:"销售状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.checkGoods(t.row)}}},[e._v("查看商品\n                    ")]),e._v(" "),a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.delOneGoods(t.row)}}},[e._v("删除\n                    ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{staticClass:"orange-bg",on:{click:e.delSelected}},[e._v("批量删除")]),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.goodsData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1):e._e(),e._v(" "),a("el-button",{staticClass:"purple-bg",on:{click:e.updateAdImage}},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:e.cancel}},[e._v("取消")])],1)},r=[];l._withStripped=!0;var i={render:l,staticRenderFns:r};t.a=i}});