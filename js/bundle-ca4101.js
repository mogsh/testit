webpackJsonp([92],{247:function(t,e,a){"use strict";function o(t){r||a(464)}Object.defineProperty(e,"__esModule",{value:!0});var s=a(356),n=a.n(s);for(var l in s)"default"!==l&&function(t){a.d(e,t,function(){return s[t]})}(l);var i=a(466),r=!1,c=a(21),u=o,g=c(n.a,i.a,!1,u,"data-v-f0b9c024",null);g.options.__file="src\\component\\admin\\goods\\Goods.vue",e.default=g.exports},356:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={beforeRouteEnter:function(t,e,a){t.meta.refreshData&&a(function(t){t.getGoodsData()}),a()},data:function(){return{loading:!1,val1:"",val2:"",val3:[],val4:"",val5:"",multipleSelection:[],options2:[],options3:this.$getCategoryOptions(),options4:this.$globalData.salesStatus,options5:this.$globalData.auditStatus,total:0,pages:0,query:{pageNum:1,pageSize:20,name:"",goodsCategoryId:"",isUp:"",goodsAudit:"",goodsIds:"",storeId:"",activityId:"",storeAdImageId:""},tableData:[]}},methods:{getGoodsData:function(){var t=this;this.loading=!0,this.$http.get(this.$api.findGoodsListPage,{params:this.query}).then(function(e){e.data.flag&&(t.loading=!1,t.tableData=e.data.data.list,t.total=e.data.data.total,t.$route.params.query&&t.val3==[]&&(t.query.goodsCategoryId=""))})},getCategoryData:function(){},getShopData:function(){if(0!=this.options2.length)return 0;this.options2=this.$getShopOptions()},searchVal1:function(){this.query.name=this.val1,this.getGoodsData()},selectVal2:function(){this.query.storeId=this.val2,this.getGoodsData()},selectVal3:function(){var t=this.val3.length;this.query.goodsCategoryId=this.val3[t-1],this.getGoodsData()},selectVal4:function(){this.query.isUp=this.val4,this.getGoodsData()},selectVal5:function(){this.query.goodsAudit=this.val5,this.getGoodsData()},toggleSalesStatus:function(t,e){var a=this;if("1"==t.isUp)this.$confirm("是否下架该商品？(注意：下架后商品将无法销售!)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.goodsIds=t.goodsId,e.isUp=0,a.$http.get(a.$api.upOrDownGoods,{params:e}).then(function(t){t.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"下架商品成功!"}))})}).catch(function(){a.$message({type:"info",message:"已取消 [下架] 操作"})});else{var o={};o.goodsIds=t.goodsId,o.isUp=1,this.$http.get(this.$api.upOrDownGoods,{params:o}).then(function(t){t.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"上架商品成功!"}))})}},toggleAppStatus:function(t,e){var a=this;if(3==e)this.$confirm("是否驳回该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.goodsIds=t.goodsId,e.goodsAudit=3,a.$http.get(a.$api.auditGoods,{params:e}).then(function(t){t.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"驳回商品成功!"}))})}).catch(function(){a.$message({type:"info",message:"已退出[驳回]操作"})});else if(2==e){var o={};o.goodsIds=t.goodsId,o.goodsAudit=2,this.$http.get(this.$api.auditGoods,{params:o}).then(function(t){t.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"通过商品成功!"}))})}},passSelect:function(){var t=this;this.multipleSelection.length?this.$confirm("是否通过选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.goodsIds=[];for(var a=0;a<t.multipleSelection.length;a++)e.goodsIds.push(t.multipleSelection[a].goodsId);e.goodsIds=e.goodsIds.join(","),e.goodsAudit=2,t.$http.get(t.$api.auditGoods,{params:e}).then(function(e){e.data.flag&&(t.getGoodsData(),t.$message({type:"warning",message:"通过选中商品成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消[通过]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},rejectSelect:function(){var t=this;this.multipleSelection.length?this.$confirm("是否驳回选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.goodsIds=[];for(var a=0;a<t.multipleSelection.length;a++)e.goodsIds.push(t.multipleSelection[a].goodsId);e.goodsIds=e.goodsIds.join(","),e.goodsAudit=3,t.$http.get(t.$api.auditGoods,{params:e}).then(function(e){e.data.flag&&(t.getGoodsData(),t.$message({type:"warning",message:"驳回选中商品成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消[驳回]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},upSelect:function(){var t=this,e=!0;this.multipleSelection.forEach(function(t,a){2!=t.goodsAudit&&(e=!1)}),this.multipleSelection.length&&e?this.$confirm("是否上架选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.goodsIds=[];for(var a=0;a<t.multipleSelection.length;a++)e.goodsIds.push(t.multipleSelection[a].goodsId);e.goodsIds=e.goodsIds.join(","),e.isUp=1,t.$http.get(t.$api.upOrDownGoods,{params:e}).then(function(e){e.data.flag&&(t.getGoodsData(),t.$message({type:"warning",message:"上架选中商品成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消 [上架] 操作"})}):e?this.$message({type:"error",message:"当前未选中任何行！"}):this.$message({type:"error",message:"所选的商品审核状态必须为通过！"})},downSelect:function(){var t=this,e=!0;this.multipleSelection.forEach(function(t,a){2!=t.goodsAudit&&(e=!1)}),this.multipleSelection.length&&e?this.$confirm("是否下架选中商品？(注意：下架后商品将无法销售!)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={};e.goodsIds=[];for(var a=0;a<t.multipleSelection.length;a++)e.goodsIds.push(t.multipleSelection[a].goodsId);e.goodsIds=e.goodsIds.join(","),e.isUp=0,t.$http.get(t.$api.upOrDownGoods,{params:e}).then(function(e){e.data.flag&&(t.getGoodsData(),t.$message({type:"warning",message:"下架选中商品成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消 [下架]操作"})}):e?this.$message({type:"error",message:"当前未选中任何行！"}):this.$message({type:"error",message:"所选的商品审核状态必须为通过！"})},checkgoods:function(t,e){this.$router.push({name:"gcg",params:{goodsId:t.goodsId,storeId:t.storeId,query:this.query,formWhere:"gg"}})},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.query.pageSize=t,this.getGoodsData()},handleCurrentChange:function(t){this.query.pageNum=t,this.getGoodsData()}},created:function(){this.getGoodsData()}}},464:function(t,e,a){var o=a(465);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(20)("6a8fbf64",o,!1)},465:function(t,e,a){e=t.exports=a(7)(!1),e.push([t.i,"\n.btn-group[data-v-f0b9c024],\n.search-group[data-v-f0b9c024] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-f0b9c024] {\n  float: right;\n}\n.up-btn[data-v-f0b9c024] {\n  position: relative;\n}\n.file-upload[data-v-f0b9c024] {\n  position: absolute;\n  background: red;\n  color: #fff;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  cursor: pointer;\n}\n.select_width .el-cascader[data-v-f0b9c024] {\n  width: 240px;\n}\n",""])},466:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[t._v("商品管理")]),t._v(" "),a("el-breadcrumb",t._l(t.$route.meta.bread,function(e,o){return a("el-breadcrumb-item",{key:o},[t._v(t._s(e))])}))],1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"search-group select_width"},[a("el-input",{staticClass:"search-input mb10",attrs:{clearable:"",placeholder:"搜索商品名称/编号/品牌","prefix-icon":"el-icon-search"},on:{blur:t.searchVal1},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchVal1(e)}},model:{value:t.val1,callback:function(e){t.val1=e},expression:"val1"}}),t._v(" "),a("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择店铺"},on:{change:t.selectVal2,focus:t.getShopData},model:{value:t.val2,callback:function(e){t.val2=e},expression:"val2"}},t._l(t.options2,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:t.options3,"change-on-select":""},on:{change:t.selectVal3},model:{value:t.val3,callback:function(e){t.val3=e},expression:"val3"}}),t._v(" "),a("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择销售状态"},on:{change:t.selectVal4},model:{value:t.val4,callback:function(e){t.val4=e},expression:"val4"}},t._l(t.options4,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择审核状态"},on:{change:t.selectVal5},model:{value:t.val5,callback:function(e){t.val5=e},expression:"val5"}},t._l(t.options5,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中...",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"imageUrl",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.imageUrl,width:"52",height:"52"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店铺"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsBrandName",label:"品牌"}}),t._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalPrice",label:"原价(元)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"销售价(元)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventory",label:"库存量(件)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventory",label:"销售状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("changeSalesStatus")(e.row.isUp))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsAudit",label:"审核状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("changeAuditStatus")(e.row.goodsAudit))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.checkgoods(e.row,e.$index)}}},[t._v("查看")]),t._v(" "),"0"==e.row.isUp&&"2"==e.row.goodsAudit?a("el-button",{ref:"",staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.toggleSalesStatus(e.row,a)}}},[t._v("上架")]):t._e(),t._v(" "),"1"==e.row.isUp&&"2"==e.row.goodsAudit?a("el-button",{ref:"",staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.toggleSalesStatus(e.row,a)}}},[t._v("下架")]):t._e(),t._v(" "),"2"!=e.row.goodsAudit?a("el-button",{ref:"",staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.toggleAppStatus(e.row,t.flag=2)}}},[t._v("通过")]):t._e(),t._v(" "),"3"!=e.row.goodsAudit?a("el-button",{ref:"",staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.toggleAppStatus(e.row,t.flag=3)}}},[t._v("驳回")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"mt20"},[a("el-button",{staticClass:"purple-bg",on:{click:t.passSelect}},[t._v("批量通过")]),t._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:t.rejectSelect}},[t._v("批量驳回")]),t._v(" "),a("el-button",{staticClass:"purple-bg",on:{click:t.upSelect}},[t._v("批量上架")]),t._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:t.downSelect}},[t._v("批量下架")]),t._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":t.query.pageNum,"page-sizes":[20,50,100,200],"page-size":t.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)])},s=[];o._withStripped=!0;var n={render:o,staticRenderFns:s};e.a=n}});