webpackJsonp([57],{327:function(e,t,a){"use strict";function n(e){c||a(704)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(436),s=a.n(o);for(var l in o)"default"!==l&&function(e){a.d(t,e,function(){return o[e]})}(l);var i=a(706),c=!1,r=a(21),u=n,d=r(s.a,i.a,!1,u,"data-v-2efd0cdf",null);d.options.__file="src\\component\\admin\\recommendation\\goods\\goods.vue",t.default=d.exports},436:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(93),s=n(o),l=a(31),i=n(l);t.default={props:["$shop"],filters:{changeIsUp:function(e){return 1==e?"上架":"下架"},changeGoodsAudit:function(e){return 2==e?"通过":3==e?"驳回":"未审核"}},data:function(){return{val1:"",val2:"",val3:[],val4:"",val5:"",multipleSelection:[],options2:[],options3:[],options4:[{value:"0",label:"下架"},{value:"1",label:"上架"}],options5:[{value:"1",label:"未审核"},{value:"2",label:"通过"},{value:"3",label:"驳回"}],total:0,pages:0,query:{pageNum:1,pageSize:20,searchName:"",goodsCategoryId:"",isUp:"",goodsAudit:"",storeId:""},tableData:[]}},methods:{getGoodsData:function(){var e=this;this.$route.params.fromRSG&&(this.query=this.$route.params.query,this.val1=this.query.searchName,this.val2=this.query.storeId,this.val4=this.query.isUp,this.val5=this.query.goodsAudit),this.$http.get(this.$api.findChannelGoodsListPage,{params:this.query}).then(function(t){e.tableData=t.data.data.list,e.total=t.data.data.total})},getCategoryData:function(){var e=this;this.$http.get(this.$api.findGoodsCategoryList).then(function(t){var a=t.data.data,n=function(e){for(var t=e,a=e.length,n=[],o=0;o<a;o++){var s={};if(s.value=t[o].id,s.label=t[o].name,null!=t[o].children){s.childrentemp=t[o].children,s.children=[];for(var l=0;l<s.childrentemp.length;l++){var i={};if(i.value=s.childrentemp[l].id,i.label=s.childrentemp[l].name,s.children.push(i),null!=s.childrentemp[l].children){i.children=[],i.childrentemp=s.childrentemp[l].children;for(var c=0;c<i.childrentemp.length;c++){var r={};r.value=i.childrentemp[c].id,r.label=i.childrentemp[c].name,i.children.push(r)}}}n[o]=s}else n[o]=s}return n}(a);e.options3=n})},getShopData:function(){var e=this;this.$http.get(this.$api.findStoreList).then(function(t){var a=t.data.data,n=[],o=[];(0,i.default)(a).forEach(function(e,t){o.push(e)}),(0,s.default)(a).forEach(function(e,t){n.push(e)});for(var l=0;l<n.length;l++){var c={};c.value=o[l],c.label=n[l],e.options2.push(c)}})},searchVal1:function(){this.query.searchName=this.val1,this.getGoodsData()},selectVal2:function(){this.query.storeId=this.val2,this.getGoodsData()},selectVal3:function(){var e=this.val3.length;this.query.goodsCategoryId=this.val3[e-1],this.getGoodsData()},selectVal4:function(){this.query.isUp=this.val4,this.getGoodsData()},selectVal5:function(){this.query.goodsAudit=this.val5,this.getGoodsData()},toggleSalesStatus:function(e,t){var a=this;if("1"==e.isUp)this.$confirm("是否下架该商品？(注意：下架后商品将无法推荐!)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=e.channelGoodsId,t.isUp=0,a.$http.get(a.$api.updateChannelGoodsIsUp,{params:t}).then(function(e){e.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"下架商品成功!"}))})}).catch(function(){a.$message({type:"info",message:"已取消 [下架] 操作"})});else{var n={};n.channelGoodsIds=e.channelGoodsId,n.isUp=1,this.$http.get(this.$api.updateChannelGoodsIsUp,{params:n}).then(function(e){e.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"上架商品成功!"}))})}},toggleAppStatus:function(e,t){var a=this;if(3==t)this.$confirm("是否驳回该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=e.channelGoodsId,t.channelGoodsStatus=3,a.$http.get(a.$api.auditChannelGoods,{params:t}).then(function(e){e.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"驳回商品成功!"}))})}).catch(function(){a.$message({type:"info",message:"已退出[驳回]操作"})});else if(2==t){var n={};n.channelGoodsIds=e.channelGoodsId,n.channelGoodsStatus=2,this.$http.get(this.$api.auditChannelGoods,{params:n}).then(function(e){e.data.flag&&(a.getGoodsData(),a.$message({type:"warning",message:"通过商品成功!"}))})}},passSelect:function(){var e=this;this.multipleSelection.length?this.$confirm("是否通过选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=[];for(var a=0;a<e.multipleSelection.length;a++)t.channelGoodsIds.push(e.multipleSelection[a].channelGoodsId);t.channelGoodsIds=t.channelGoodsIds.join(","),t.channelGoodsStatus=2,e.$http.get(e.$api.auditChannelGoods,{params:t}).then(function(t){t.data.flag&&(e.getGoodsData(),e.$message({type:"warning",message:"通过选中商品成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消[通过]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},rejectSelect:function(){var e=this;this.multipleSelection.length?this.$confirm("是否驳回选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=[];for(var a=0;a<e.multipleSelection.length;a++)t.channelGoodsIds.push(e.multipleSelection[a].channelGoodsId);t.channelGoodsIds=t.channelGoodsIds.join(","),t.channelGoodsStatus=3,e.$http.get(e.$api.auditChannelGoods,{params:t}).then(function(t){t.data.flag&&(e.getGoodsData(),e.$message({type:"warning",message:"驳回选中商品成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消[驳回]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},upSelect:function(){var e=this,t=!0;this.multipleSelection.forEach(function(e,a){2!=e.goodsAudit&&(t=!1)}),this.multipleSelection.length&&t?this.$confirm("是否上架选中商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=[];for(var a=0;a<e.multipleSelection.length;a++)t.channelGoodsIds.push(e.multipleSelection[a].channelGoodsId);t.channelGoodsIds=t.channelGoodsIds.join(","),t.isUp=1,e.$http.get(e.$api.updateChannelGoodsIsUp,{params:t}).then(function(t){t.data.flag&&(e.getGoodsData(),e.$message({type:"warning",message:"上架选中商品成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消 [上架] 操作"})}):t?this.$message({type:"error",message:"当前未选中任何行！"}):this.$message({type:"error",message:"所选的商品审核状态必须为通过！"})},downSelect:function(){var e=this,t=!0;this.multipleSelection.forEach(function(e,a){2!=e.goodsAudit&&(t=!1)}),this.multipleSelection.length&&t?this.$confirm("是否下架选中商品？(注意：下架后商品将无法推荐!)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=[];for(var a=0;a<e.multipleSelection.length;a++)t.channelGoodsIds.push(e.multipleSelection[a].channelGoodsId);t.channelGoodsIds=t.channelGoodsIds.join(","),t.isUp=0,e.$http.get(e.$api.updateChannelGoodsIsUp,{params:t}).then(function(t){t.data.flag&&(e.getGoodsData(),e.$message({type:"warning",message:"下架选中商品成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消 [下架]操作"})}):t?this.$message({type:"error",message:"当前未选中任何行！"}):this.$message({type:"error",message:"所选的商品审核状态必须为通过！"})},checkgoods:function(e,t){this.$router.push({name:"rsc",params:{channelGoodsId:e.channelGoodsId,query:this.query,fromGoods:!0}})},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.query.pageSize=e,this.getGoodsData()},handleCurrentChange:function(e){this.query.pageNum=e,this.getGoodsData()}},created:function(){this.getGoodsData(),this.getShopData(),this.getCategoryData()}}},704:function(e,t,a){var n=a(705);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(20)("4a5dd7e2",n,!1)},705:function(e,t,a){t=e.exports=a(7)(!1),t.push([e.i,"\n.btn-group[data-v-2efd0cdf],\n.search-group[data-v-2efd0cdf] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-2efd0cdf] {\n  float: right;\n}\n.up-btn[data-v-2efd0cdf] {\n  position: relative;\n}\n.file-upload[data-v-2efd0cdf] {\n  position: absolute;\n  background: red;\n  color: #fff;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  cursor: pointer;\n}\n.select_width .el-cascader[data-v-2efd0cdf] {\n  width: 240px;\n}\n",""])},706:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[e._v("商品管理")]),e._v(" "),a("el-breadcrumb",e._l(e.$route.meta.bread,function(t,n){return a("el-breadcrumb-item",{key:n},[e._v(e._s(t))])}))],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"search-group select_width"},[a("el-input",{staticClass:"search-input mb10",attrs:{clearable:"",placeholder:"搜索商品名称/编号/品牌","prefix-icon":"el-icon-search"},on:{blur:e.searchVal1},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchVal1(t)}},model:{value:e.val1,callback:function(t){e.val1=t},expression:"val1"}}),e._v(" "),a("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择店铺"},on:{change:e.selectVal2},model:{value:e.val2,callback:function(t){e.val2=t},expression:"val2"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:e.options3,"change-on-select":""},on:{change:e.selectVal3},model:{value:e.val3,callback:function(t){e.val3=t},expression:"val3"}}),e._v(" "),a("el-select",{staticClass:"mb10",attrs:{clearable:"",filterable:"",placeholder:"选择推荐状态"},on:{change:e.selectVal4},model:{value:e.val4,callback:function(t){e.val4=t},expression:"val4"}},e._l(e.options4,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-select",{staticClass:"mb10",attrs:{clearable:"",filterable:"",placeholder:"选择审核状态"},on:{change:e.selectVal5},model:{value:e.val5,callback:function(t){e.val5=t},expression:"val5"}},e._l(e.options5,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"商品编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsImageUrl",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.goodsImageUrl,width:"52",height:"52"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"所属店铺"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"商品价格(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsRecommendCount",label:"总推荐数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsClickCount",label:"总点击数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsSettleCount",label:"总结算数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossDealAmount",label:"总销售额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossCommisionAmount",label:"总产生佣金(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isUp",label:"推荐状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("changeIsUp")(t.row.isUp))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsAudit",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("changeGoodsAudit")(t.row.goodsAudit))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.checkgoods(t.row,t.$index)}}},[e._v("查看")]),e._v(" "),"0"==t.row.isUp&&"2"==t.row.goodsAudit?a("el-button",{ref:"",staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.toggleSalesStatus(t.row,a)}}},[e._v("上架")]):e._e(),e._v(" "),"1"==t.row.isUp&&"2"==t.row.goodsAudit?a("el-button",{ref:"",staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.toggleSalesStatus(t.row,a)}}},[e._v("下架")]):e._e(),e._v(" "),"2"!=t.row.goodsAudit?a("el-button",{ref:"",staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.toggleAppStatus(t.row,e.flag=2)}}},[e._v("通过")]):e._e(),e._v(" "),"3"!=t.row.goodsAudit?a("el-button",{ref:"",staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.toggleAppStatus(t.row,e.flag=3)}}},[e._v("驳回")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"mt20"},[a("el-button",{staticClass:"purple-bg",on:{click:e.passSelect}},[e._v("批量通过")]),e._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:e.rejectSelect}},[e._v("批量驳回")]),e._v(" "),a("el-button",{staticClass:"purple-bg",on:{click:e.upSelect}},[e._v("批量上架")]),e._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:e.downSelect}},[e._v("批量下架")]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.query.pageNum,"page-sizes":[20,50,100,200],"page-size":e.query.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)])},o=[];n._withStripped=!0;var s={render:n,staticRenderFns:o};t.a=s}});