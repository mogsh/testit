webpackJsonp([20],{282:function(e,t,l){"use strict";function a(e){n||l(569)}Object.defineProperty(t,"__esModule",{value:!0});var r=l(391),s=l.n(r);for(var o in r)"default"!==o&&function(e){l.d(t,e,function(){return r[e]})}(o);var i=l(571),n=!1,c=l(21),u=a,m=c(s.a,i.a,!1,u,"data-v-2723c8a3",null);m.options.__file="src\\component\\admin\\wxapp\\addCarousel.vue",t.default=m.exports},391:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{addType:"",imgApi:this.$imgApi,multipleSelection:[],val2:"",val3:[],val4:[],val5:[],val6:[],options3:[],options4:[],options5:[],options6:[],keepTime:"",ruleForm:{jumpTypeParam:""},rules:{title:[{required:!0,message:"请输入内容",trigger:"blur"}],imgItem:[{required:!0,message:"请输入内容",trigger:"blur"}],keepTime:[{required:!0,message:"请输入内容",trigger:"blur"}],tapUrl:[{required:!0,message:"请输入内容",trigger:"blur"}]},isDisable:!1,isBindGoods:!1,dialogImageUrl:"",dialogVisible:!1,tableData:[],currentPage:1}},methods:{checkGoods:function(e){this.$router.push("/goods/checkgoods")},delGoods:function(e){var t=this,l=this;this.$confirm("是否删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.tableData.indexOf(e);a>-1&&(t.tableData.splice(a,1),t.$message({type:"warning",message:"删除成功!"})),l.ruleForm.jumpTypeParam="",t.tableData.forEach(function(e,t){l.ruleForm.jumpTypeParam=e.goodsId+","+l.ruleForm.jumpTypeParam})}).catch(function(){t.$message({type:"info",message:"已取消删除操作"})})},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){},handleCurrentChange:function(e){},handleRemove:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadImgHandler:function(e){this.ruleForm.imgUrl=e.data[0].fileUrl},save:function(){var e=this;this.ruleForm.title&&this.ruleForm.imgUrl&&this.ruleForm.beginUseTime&&this.ruleForm.endUseTime&&this.ruleForm.sort&&this.ruleForm.jumpType&&this.ruleForm.jumpUrl||this.ruleForm.title&&this.ruleForm.imgUrl&&this.ruleForm.beginUseTime&&this.ruleForm.endUseTime&&this.ruleForm.sort&&this.ruleForm.jumpType?"addCarousel"==this.addType?this.$http.get(this.$api.wxInsertAdImage,{params:this.ruleForm}).then(function(t){"success"==t.data.msg?(e.$message({type:"success",message:"保存成功!"}),1==e.ruleForm.jumpType?e.$router.push({path:"/wxapp/checkcarousel",query:{adImageId:t.data.data.adImageId}}):e.$router.push("/wxapp/carousel")):e.$message({type:"error",message:"保存失败!"})}):this.$http.get(this.$api.newgoodsInsertAdImage,{params:this.ruleForm}).then(function(t){"success"==t.data.msg?(e.$message({type:"success",message:"保存成功!"}),1==e.ruleForm.jumpType?e.$router.push({path:"/wxapp/checkcarousel",query:{adImageId:t.data.data.adImageId}}):e.$message({type:"error",message:"请选择跳转类型为商品!"})):e.$message({type:"error",message:"保存失败!"})}):this.$message({type:"error",message:"请完整填写信息！"})},cancel:function(){var e=this;this.$confirm("取消后将放弃保存直接返回上一页，请确认是否取消修改？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.go(-1)}).catch(function(){})},addGoods:function(){},selectTime:function(){this.keepTime?(this.ruleForm.beginUseTime=this.keepTime[0],this.ruleForm.endUseTime=this.keepTime[1].substring(0,10)+" 23:59:59"):this.ruleForm.beginUseTime=this.ruleForm.endUseTime=""},delSelected:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("是否批量删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"warning",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},searchVal2:function(){},selectVal3:function(){},selectVal4:function(){},selectVal5:function(){},selectVal6:function(){}},created:function(){this.addType=this.$route.query.addType}}},569:function(e,t,l){var a=l(570);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);l(20)("4b485e06",a,!1)},570:function(e,t,l){t=e.exports=l(7)(!1),t.push([e.i,"\n.btn-group[data-v-2723c8a3],\n.search-group[data-v-2723c8a3] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-2723c8a3] {\n  float: right;\n}\n.content .content-title[data-v-2723c8a3] {\n  font-size: 18px;\n  font-family: MicrosoftYaHei-Bold;\n  color: #606266;\n  font-weight: bold;\n  margin: 0 10px 20px;\n}\n",""])},571:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"breadcrumb"},[l("div",{staticClass:"breadcrumb-head"},[e._v("轮播图管理")]),e._v(" "),l("el-breadcrumb",e._l(e.$route.meta.bread,function(t,a){return l("el-breadcrumb-item",{key:a},[e._v(e._s(t))])}))],1),e._v(" "),l("div",{staticClass:"content content1 addcarousel"},[l("div",{staticClass:"content-title"},[e._v("填写轮播图信息")]),e._v(" "),l("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"轮播图标题",prop:"title"}},[l("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title","string"==typeof t?t.trim():t)},expression:"ruleForm.title"}})],1)],1)],1),e._v(" "),l("el-row",{staticClass:"addcarousel-pic-input",staticStyle:{height:"200px"}},[l("el-col",[l("el-form-item",{attrs:{label:"轮播图图片",prop:"imgItem"}},[l("el-upload",{attrs:{action:e.imgApi,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.uploadImgHandler}},[l("i",{staticClass:"el-icon-plus"}),e._v(" "),l("div",{staticClass:"el-upload__tip orange-txt",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                                **图片尺寸：750*360px；格式:jpg、png；大小：200KB以内\n                            ")])]),e._v(" "),l("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),e._v(" "),l("el-row",[l("el-form-item",{attrs:{label:"持续时间",prop:"time"}},[l("el-col",{attrs:{span:8}},[l("el-date-picker",{attrs:{clearable:"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.selectTime},model:{value:e.keepTime,callback:function(t){e.keepTime=t},expression:"keepTime"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"排序号"}},[l("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.sort,callback:function(t){e.$set(e.ruleForm,"sort",t)},expression:"ruleForm.sort"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"类型"}},[l("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.moduleType,callback:function(t){e.$set(e.ruleForm,"moduleType",t)},expression:"ruleForm.moduleType"}},[e._v("轮播图")]),e._v(" "),l("el-radio",{attrs:{label:"3"},model:{value:e.ruleForm.moduleType,callback:function(t){e.$set(e.ruleForm,"moduleType",t)},expression:"ruleForm.moduleType"}},[e._v("广告图")])],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"跳转方式"}},[l("el-radio",{attrs:{label:"2",disabled:e.isDisable},model:{value:e.ruleForm.jumpType,callback:function(t){e.$set(e.ruleForm,"jumpType",t)},expression:"ruleForm.jumpType"}},[e._v("链接")]),e._v(" "),l("el-radio",{attrs:{label:"1",disabled:e.isDisable},model:{value:e.ruleForm.jumpType,callback:function(t){e.$set(e.ruleForm,"jumpType",t)},expression:"ruleForm.jumpType"}},[e._v("商品")])],1)],1)],1),e._v(" "),"2"==e.ruleForm.jumpType?l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"跳转链接",prop:"jumpUrl"}},[l("el-input",{model:{value:e.ruleForm.jumpUrl,callback:function(t){e.$set(e.ruleForm,"jumpUrl",t)},expression:"ruleForm.jumpUrl"}})],1)],1)],1):e._e()],1)],1),e._v(" "),e.isBindGoods?l("div",{staticClass:"content content1"},[l("div",{staticClass:"content-title"},[e._v("编辑轮播图跳转商品列表")]),e._v(" "),l("div",{staticClass:"search-group"},[l("el-input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"搜索商品名称/编号/品牌","prefix-icon":"el-icon-search"},on:{blur:e.searchVal2},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchVal2(t)}},model:{value:e.val2,callback:function(t){e.val2="string"==typeof t?t.trim():t},expression:"val2"}}),e._v(" "),l("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择店铺"},on:{change:e.selectVal3},model:{value:e.val3,callback:function(t){e.val3=t},expression:"val3"}},e._l(e.options3,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),e._v(" "),l("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:e.options4,"change-on-select":""},on:{change:e.selectVal4},model:{value:e.val4,callback:function(t){e.val4=t},expression:"val4"}}),e._v(" "),l("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择销售状态"},on:{change:e.selectVal5},model:{value:e.val5,callback:function(t){e.val5=t},expression:"val5"}},e._l(e.options5,function(e,t){return l("el-option",{key:t,staticClass:"search-select",attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),l("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","default-sort":{prop:"brand",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection"}}),e._v(" "),l("el-table-column",{attrs:{prop:"goodsName",label:"名称"}}),e._v(" "),l("el-table-column",{attrs:{prop:"goodsCode",label:"编号"}}),e._v(" "),l("el-table-column",{attrs:{prop:"brandName",label:"品牌"}}),e._v(" "),l("el-table-column",{attrs:{prop:"goodsCategoryName",label:"分类"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sellingPrice",label:"销售价(元)"}}),e._v(" "),l("el-table-column",{attrs:{prop:"inventory",label:"库存量(件)"}}),e._v(" "),l("el-table-column",{attrs:{prop:"isUp",label:"销售状态"}}),e._v(" "),l("el-table-column",{attrs:{prop:"sort",label:"排序号",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"1"},model:{value:t.row.sort,callback:function(l){e.$set(t.row,"sort",l)},expression:"scope.row.sort"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(l){e.delGoods(t.row)}}},[e._v("删除\n                    ")])]}}])})],1),e._v(" "),l("div",{staticStyle:{"margin-top":"20px"}},[l("el-button",{staticClass:"orange-bg",on:{click:e.delSelected}},[e._v("批量删除")])],1)],1):e._e(),e._v(" "),l("el-button",{staticClass:"purple-bg",on:{click:e.save}},[e._v("保存")]),e._v(" "),l("el-button",{staticClass:"orange-bg",on:{click:e.cancel}},[e._v("取消")])],1)},r=[];a._withStripped=!0;var s={render:a,staticRenderFns:r};t.a=s}});