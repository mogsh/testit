webpackJsonp([97],{248:function(t,e,a){"use strict";function s(t){n||a(467)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(357),l=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);var r=a(469),n=!1,c=a(21),p=s,d=c(l.a,r.a,!1,p,"data-v-28efdb30",null);d.options.__file="src\\component\\admin\\goods\\Assort.vue",e.default=d.exports},357:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(92),i=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={data:function(){return{loading:!1,showDialog:!1,imgApi:this.$imgApi,flag0:0,flag1:0,flag2:0,lv:"",parentIdTemp1:"",parentIdTemp2:"",upImgs0:[],upImgs2:[],treeData:[],tableData1:[],tableData2:[],tableData3:[],FormLv0:{parentId:"0",name:"",imageUrl:"",sort:"",isUp:"",categoryLevel:"1",isAd:1,adImage:{jumpType:"",jumpTypeParam:"",jumpUrl:"",adImageUrl:"",isUp:!0}},FormLv1:{parentId:"",name:"",sort:"",isUp:!0,categoryLevel:"2",isAd:0},FormLv2:{parentId:"",name:"",imageUrl:"",sort:"",isUp:!0,categoryLevel:"3",isAd:0}}},methods:{getAssortList:function(){var t=this;this.loading=!0,this.tableData1=[],this.tableData2=[],this.tableData3=[];this.$http.get(this.$api.findGoodsCategoryList+"?id=").then(function(e){e.data.flag&&(t.loading=!1,t.treeData=e.data.data,t.treeData.forEach(function(e,a){t.tableData1.push(e)}))})},addPost:function(t){var e=this;if(t.children&&delete t.children,t.id&&delete t.id,0==this.lv){var a={};a.jumpType=t.adImage.jumpType,a.jumpTypeParam=t.adImage.jumpTypeParam,a.jumpUrl=t.adImage.jumpUrl,a.adImageUrl=t.adImage.adImageUrl,a.isUp=t.adImage.isUp,t.adImage=a}var s=(0,i.default)(t);this.$http.post(this.$api.addGoodscCtegory,s).then(function(t){t.data.flag?(e.$message.success("新增成功！"),e.lv=-1,e.getAssortList(),e.showDialog=!1):e.$message.error("数据未填写完毕或出错，请重新检查！")})},editPost:function(t){var e=this;if(0==this.lv){t.parentId=0,t.categoryLevel=1,1==t.adImage.isUp?t.adImage.isUp=t.isUp=1:t.adImage.isUp=t.isUp=0;var a={};a.adImageId=t.adImage.adImageId,a.jumpType=t.adImage.jumpType,a.jumpTypeParam=t.adImage.jumpTypeParam,a.jumpUrl=t.adImage.jumpUrl,a.adImageUrl=t.adImage.adImageUrl,a.isUp=t.adImage.isUp,t.adImage=a}else 1==t.isUp?t.isUp=t.isUp=1:t.isUp=t.isUp=0,1==this.lv?(t.parentId=this.parentIdTemp1,t.categoryLevel=2,t.isAd=0):2==this.lv&&(t.parentId=this.parentIdTemp2,t.categoryLevel=3,t.isAd=0);t.children&&delete t.children;var s=(0,i.default)(t);this.$http.post(this.$api.updateGoodsCtegory,s).then(function(t){t.data.flag?(e.$message.success("修改成功！"),e.lv=-1,e.getAssortList(),e.showDialog=!1):e.$message.error("数据未填写完毕或出错，请重新检查！")})},delPost:function(t,e){var a=this,s={};s.goodsCategoryId=t,s.isAd=e,this.$confirm("删除分类请确认是否含有子类或该分类是否绑定商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.get(a.$api.deleteGoodsCategory,{params:s}).then(function(t){t.data.flag?(a.$message.success("删除成功！"),a.getAssortList()):a.$message.error("删除失败！")})}).catch(function(){})},checkLv1:function(t,e){var a=this;e.preventDefault=!0,this.lv=1,this.FormLv1.parentId=t.id,this.tableData2=[],this.tableData3=[],t.children.forEach(function(t,e){a.tableData2.push(t)}),this.parentIdTemp1=t.id},checkLv2:function(t){var e=this;this.lv=2,this.tableData3=[],this.FormLv2.parentId=t.id,t.children.forEach(function(t,a){e.tableData3.push(t)}),this.parentIdTemp2=t.id},editLv0:function(t,e){var a=this;this.showDialog=!0,this.flag0=1,this.lv=0,this.tableData2=[],this.tableData3=[],this.parentIdTemp1=t.id,t.children.forEach(function(t,e){a.tableData2.push(t)});var s=JSON.parse((0,i.default)(t));1==s.adImage.isUp?s.adImage.isUp=s.isUp=!0:s.adImage.isUp=s.isUp=!1,1==s.adImage.jumpType?s.adImage.jumpType="1":s.adImage.jumpType="2",this.upImgs0=[];var l={};l.name=l.url=s.adImage.imgUrl,this.upImgs0.push(l),this.FormLv0=s},editLv1:function(t,e){var a=this;this.showDialog=!0,this.flag1=1,this.lv=1,this.tableData3=[],this.parentIdTemp2=t.id,t.children.forEach(function(t,e){a.tableData3.push(t)});var s=JSON.parse((0,i.default)(t));1==s.isUp?s.isUp=!0:s.isUp=!1,this.FormLv1=s},editLv2:function(t,e){this.showDialog=!0,this.flag2=1,this.lv=2;var a=JSON.parse((0,i.default)(t));1==a.isUp?a.isUp=!0:a.isUp=!1,this.upImgs2=[];var s={};s.name=s.url=a.imageUrl,this.upImgs2.push(s),this.FormLv2=a},del0:function(t,e){var a=t.id;this.delPost(a,1)},del1:function(t,e){var a=t.id;this.delPost(a,0)},del2:function(t,e){var a=t.id;this.delPost(a,0)},addCtg:function(t){this.lv=t,this.showDialog=!0,""==this.FormLv1.parentId&&1==t?(this.showDialog=!1,this.$message.error("请先选择对应的一级类目！"),this.lv=-1):""==this.FormLv2.parentId&&2==t?(this.$message.error("请先选择对应的二级类目！"),this.showDialog=!1,this.lv=-1):0==t?(this.lv=0,this.flag0=0,this.FormLv0.name="",this.upImgs0=[],this.FormLv0.isUp="",this.FormLv0.sort="",this.FormLv0.adImage.jumpUrl="",this.FormLv0.adImage.jumpType="1"):1==t?(this.lv=1,this.flag1=0,this.FormLv1.name="",this.FormLv1.isUp="",this.FormLv1.sort=""):2==t&&(this.lv=2,this.flag2=0,this.FormLv2.name="",this.upImgs2=[],this.FormLv2.isUp="",this.FormLv2.sort="")},uploadImgHandler0:function(t){this.FormLv0.adImage.adImageUrl=t.data[0].fileUrl},uploadImgHandler2:function(t){this.FormLv2.imageUrl=t.data[0].fileUrl},handleRemove0:function(t,e){},handleRemove2:function(t,e){},save0:function(){if(0==this.flag0){var t=this.FormLv0;1==t.adImage.isUp?t.adImage.isUp=t.isUp=1:t.adImage.isUp=t.isUp=0,this.addPost(t),this.tableData2=[],this.tableData3=[]}else this.editPost(this.FormLv0)},cancle0:function(){this.showDialog=!1},save1:function(){if(0==this.flag1){var t=this.FormLv1;1==t.isUp?t.isUp=t.isUp=1:t.isUp=t.isUp=0,this.addPost(t),this.tableData2=[],this.tableData3=[]}else this.editPost(this.FormLv1)},cancle1:function(){this.showDialog=!1},save2:function(){if(0==this.flag2){var t=this.FormLv2;1==t.isUp?t.isUp=t.isUp=1:t.isUp=t.isUp=0,this.addPost(t),this.tableData2=[],this.tableData3=[]}else this.editPost(this.FormLv2)},cancle2:function(){this.showDialog=!1}},created:function(){this.getAssortList()}}},467:function(t,e,a){var s=a(468);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(20)("1bd7c712",s,!1)},468:function(t,e,a){e=t.exports=a(7)(!1),e.push([t.i,"\n.content .content-title[data-v-28efdb30] {\n  font-size: 18px;\n  font-family: MicrosoftYaHei-Bold;\n  color: #606266;\n  font-weight: bold;\n  margin: 0 10px 20px;\n}\n.block[data-v-28efdb30] {\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  padding: 20px;\n  margin-bottom: 20px;\n  width: 25%;\n}\n.block1[data-v-28efdb30] {\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n  padding: 20px;\n  margin-bottom: 20px;\n}\n",""])},469:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[t._v("订单管理")]),t._v(" "),a("el-breadcrumb",t._l(t.$route.meta.bread,function(e,s){return a("el-breadcrumb-item",{key:s},[t._v(t._s(e))])}))],1),t._v(" "),a("div",{staticClass:"content assortTabel",staticStyle:{height:"100%"}},[a("div",{staticClass:"content-title"},[t._v("分类列表")]),t._v(" "),a("div",{staticClass:"flex flex-bt"},[a("div",{staticClass:"block"},[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(e){t.addCtg(t.lv=0)}}},[t._v("新增一级分类")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"pointer",staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中...",height:"500",size:"small","highlight-current-row":"",data:t.tableData1},on:{"row-click":t.checkLv1}},[a("el-table-column",{attrs:{label:"名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"medium"},on:{click:function(a){a.stopPropagation(),t.editLv0(e.row,e.$index)}}},[a("i",{staticClass:"el-icon-edit-outline"})]),t._v(" "),a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"medium"},on:{click:function(a){a.stopPropagation(),t.del0(e.row,e.$index)}}},[a("i",{staticClass:"el-icon-circle-close-outline"})])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"block"},[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(e){t.addCtg(t.lv=1)}}},[t._v("新增二级分类")]),t._v(" "),a("el-table",{staticClass:"pointer",staticStyle:{width:"100%"},attrs:{size:"small",height:"500","highlight-current-row":"",data:t.tableData2},on:{"row-click":t.checkLv2}},[a("el-table-column",{attrs:{label:"名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"medium"},on:{click:function(a){a.stopPropagation(),t.editLv1(e.row,e.$index)}}},[a("i",{staticClass:"el-icon-edit-outline"})]),t._v(" "),a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"medium"},on:{click:function(a){a.stopPropagation(),t.del1(e.row,e.$index)}}},[a("i",{staticClass:"el-icon-circle-close-outline"})])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"block"},[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(e){t.addCtg(t.lv=2)}}},[t._v("新增三级分类")]),t._v(" "),a("el-table",{staticClass:"pointer",staticStyle:{width:"100%"},attrs:{size:"small",height:"500","highlight-current-row":"",data:t.tableData3}},[a("el-table-column",{attrs:{label:"名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"medium"},on:{click:function(a){a.stopPropagation(),t.editLv2(e.row,e.$index)}}},[a("i",{staticClass:"el-icon-edit-outline"})]),t._v(" "),a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"medium"},on:{click:function(a){a.stopPropagation(),t.del2(e.row,e.$index)}}},[a("i",{staticClass:"el-icon-circle-close-outline"})])]}}])})],1)],1)])]),t._v(" "),a("el-dialog",{staticClass:"content",attrs:{title:"分类信息",visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[0==t.lv&&0==t.flag0?a("div",{staticClass:"content-title"},[t._v("新增"+t._s(t.lv+1)+"级分类")]):t._e(),t._v(" "),0==t.lv&&1==t.flag0?a("div",{staticClass:"content-title"},[t._v("编辑"+t._s(t.lv+1)+"级分类")]):t._e(),t._v(" "),1==t.lv&&0==t.flag1?a("div",{staticClass:"content-title"},[t._v("新增"+t._s(t.lv+1)+"级分类")]):t._e(),t._v(" "),1==t.lv&&1==t.flag1?a("div",{staticClass:"content-title"},[t._v("编辑"+t._s(t.lv+1)+"级分类")]):t._e(),t._v(" "),2==t.lv&&0==t.flag2?a("div",{staticClass:"content-title"},[t._v("新增"+t._s(t.lv+1)+"级分类")]):t._e(),t._v(" "),2==t.lv&&1==t.flag2?a("div",{staticClass:"content-title"},[t._v("编辑"+t._s(t.lv+1)+"级分类")]):t._e(),t._v(" "),0==t.lv?a("div",[a("div",{staticClass:"block1"},[a("el-form",{ref:"FormLv0",attrs:{model:t.FormLv0,"label-position":"left","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.FormLv0.name,callback:function(e){t.$set(t.FormLv0,"name","string"==typeof e?e.trim():e)},expression:"FormLv0.name"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"addcarousel",staticStyle:{height:"200px"}},[a("el-col",[a("el-form-item",{attrs:{label:"分类广告图"}},[a("el-upload",{attrs:{action:t.imgApi,"list-type":"picture-card",limit:1,"file-list":t.upImgs0,"on-success":t.uploadImgHandler0,"on-remove":t.handleRemove0}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("div",{staticClass:"el-upload__tip orange-txt",attrs:{slot:"tip"},slot:"tip"},[t._v("**图片尺寸：510*180px；格式:jpg、png；大小：100KB以内")])])],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分类排序"}},[a("el-input",{model:{value:t.FormLv0.sort,callback:function(e){t.$set(t.FormLv0,"sort",e)},expression:"FormLv0.sort"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"isShow",label:"显示状态"}},[a("el-switch",{model:{value:t.FormLv0.adImage.isUp,callback:function(e){t.$set(t.FormLv0.adImage,"isUp",e)},expression:"FormLv0.adImage.isUp"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"toWhere",label:"广告图跳转"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.FormLv0.adImage.jumpType,callback:function(e){t.$set(t.FormLv0.adImage,"jumpType",e)},expression:"FormLv0.adImage.jumpType"}},[t._v("链接")])],1)],1),t._v(" "),1==t.FormLv0.adImage.jumpType?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"link",label:"跳转链接"}},[a("el-input",{model:{value:t.FormLv0.adImage.jumpUrl,callback:function(e){t.$set(t.FormLv0.adImage,"jumpUrl",e)},expression:"FormLv0.adImage.jumpUrl"}})],1)],1)],1):t._e()],1)],1),t._v(" "),a("el-button",{staticClass:"purple-bg",on:{click:t.save0}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:t.cancle0}},[t._v("取消")])],1):t._e(),t._v(" "),1==t.lv?a("div",[a("div",{staticClass:"block1"},[a("el-form",{ref:"FormLv1",attrs:{model:t.FormLv1,"label-position":"left","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.FormLv1.name,callback:function(e){t.$set(t.FormLv1,"name","string"==typeof e?e.trim():e)},expression:"FormLv1.name"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分类排序"}},[a("el-input",{model:{value:t.FormLv1.sort,callback:function(e){t.$set(t.FormLv1,"sort",e)},expression:"FormLv1.sort"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"isShow",label:"显示状态"}},[a("el-switch",{model:{value:t.FormLv1.isUp,callback:function(e){t.$set(t.FormLv1,"isUp",e)},expression:"FormLv1.isUp"}})],1)],1)],1)],1),t._v(" "),a("el-button",{staticClass:"purple-bg",on:{click:t.save1}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:t.cancle1}},[t._v("取消")])],1):t._e(),t._v(" "),2==t.lv?a("div",[a("div",{staticClass:"block1"},[a("el-form",{ref:"FormLv2",attrs:{model:t.FormLv2,"label-position":"left","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.FormLv2.name,callback:function(e){t.$set(t.FormLv2,"name","string"==typeof e?e.trim():e)},expression:"FormLv2.name"}})],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{height:"200px"}},[a("el-col",[a("el-form-item",{attrs:{label:"分类图片"}},[a("el-upload",{attrs:{action:t.imgApi,"list-type":"picture-card","file-list":t.upImgs2,"on-success":t.uploadImgHandler2,"on-remove":t.handleRemove2,limit:1}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("div",{staticClass:"el-upload__tip orange-txt",attrs:{slot:"tip"},slot:"tip"},[t._v("**图片尺寸：130*130px；格式:jpg、png；大小：50KB以内")])])],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分类排序"}},[a("el-input",{model:{value:t.FormLv2.sort,callback:function(e){t.$set(t.FormLv2,"sort",e)},expression:"FormLv2.sort"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{prop:"isShow",label:"显示状态"}},[a("el-switch",{model:{value:t.FormLv2.isUp,callback:function(e){t.$set(t.FormLv2,"isUp",e)},expression:"FormLv2.isUp"}})],1)],1)],1)],1),t._v(" "),a("el-button",{staticClass:"purple-bg",on:{click:t.save2}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:t.cancle2}},[t._v("取消")])],1):t._e()])],1)},i=[];s._withStripped=!0;var l={render:s,staticRenderFns:i};e.a=l}});