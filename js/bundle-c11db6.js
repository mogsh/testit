webpackJsonp([69],{349:function(t,e,a){"use strict";function n(t){r||a(770)}Object.defineProperty(e,"__esModule",{value:!0});var l=a(458),s=a.n(l);for(var o in l)"default"!==o&&function(t){a.d(e,t,function(){return l[t]})}(o);var i=a(772),r=!1,c=a(21),d=n,u=c(s.a,i.a,!1,d,"data-v-647dc1b5",null);u.options.__file="src\\component\\admin\\recommendation\\asort\\addSortGoods.vue",e.default=u.exports},458:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a(93),s=n(l),o=a(31),i=n(o);e.default={filters:{changehasAdd:function(t){return 1==t?"已添加":"未添加"}},data:function(){return{query:{pageNum:1,pageSize:10},total:0,val0:"",val1:"",val2:"",val3:[],val4:"",options0:[],options2:[],options3:[],options4:[{value:"1",label:"已添加"},{value:"0",label:"未添加"}],currentPage:1,tableData:[],addStr:"",multipleSelection:[]}},methods:{getIntroductiosnList:function(){var t=this;this.$http.get(this.$api.findChannelCategoryGoodsAddListPage,{params:this.query}).then(function(e){t.tableData=e.data.data.list,t.total=e.data.data.total})},getCategoryData:function(){var t=this;this.$http.get(this.$api.findGoodsCategoryList).then(function(e){var a=e.data.data,n=function(t){for(var e=t,a=t.length,n=[],l=0;l<a;l++){var s={};if(s.value=e[l].id,s.label=e[l].name,null!=e[l].children){s.childrentemp=e[l].children,s.children=[];for(var o=0;o<s.childrentemp.length;o++){var i={};if(i.value=s.childrentemp[o].id,i.label=s.childrentemp[o].name,s.children.push(i),null!=s.childrentemp[o].children){i.children=[],i.childrentemp=s.childrentemp[o].children;for(var r=0;r<i.childrentemp.length;r++){var c={};c.value=i.childrentemp[r].id,c.label=i.childrentemp[r].name,i.children.push(c)}}}n[l]=s}else n[l]=s}return n}(a);t.options3=n})},getAllChannelCategory:function(){var t=this;this.$http.get(this.$api.findAllChannelCategory,{params:this.query}).then(function(e){var a=e.data.data,n=[];for(var l in a)n.push({label:a[l].channelCategoryName,value:a[l].channelCategoryId});t.options0=n})},selectVal0:function(){},searchVal1:function(){this.query.searchName=this.val1,this.getIntroductiosnList()},selectVal2:function(){this.query.storeId=this.val2,this.getIntroductiosnList()},selectVal3:function(){var t=this.val3.length;this.query.goodsCategoryId=this.val3[t-1],this.getIntroductiosnList()},selectVal4:function(){this.query.hasAdd=this.val4,this.getIntroductiosnList()},handleSelectionChange:function(t){this.multipleSelection=t;var e="";for(var a in this.multipleSelection)e=e+this.multipleSelection[a].channelGoodsId+",";e=e.substring(0,e.length-1),this.addStr=e},handleSizeChange:function(t){this.query.pageSize=t,this.getIntroductiosnList()},handleCurrentChange:function(t){this.query.pageNum=t,this.getIntroductiosnList()},getShopData:function(){var t=this;this.$http.get(this.$api.findStoreList).then(function(e){var a=e.data.data,n=[],l=[];(0,i.default)(a).forEach(function(t,e){l.push(t)}),(0,s.default)(a).forEach(function(t,e){n.push(t)});for(var o=0;o<n.length;o++){var r={};r.value=l[o],r.label=n[o],t.options2.push(r)}})},checkOrganization:function(t){this.$router.push({name:"raagd",params:{channelGoodsId:t.channelGoodsId}})},add:function(t,e){var a=this;this.$confirm("确认添加?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.val0?a.$http.get(a.$api.insertChannelGoodsCategoryGoods,{params:{channelCategoryId:a.val0,channelGoodsIds:t.channelGoodsId}}).then(function(t){1==t.data.flag?(a.$message({type:"success",message:"添加成功。"}),a.getIntroductiosnList()):a.$message({type:"error",message:"添加失败。"})}):a.$message({type:"error",message:"选择添加分类"})}).catch(function(){a.$message({type:"info",message:"已取消添加"})})},AddSelect:function(){var t=this;this.multipleSelection.length?this.$confirm("确认添加选中的商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.val0?t.$http.get(t.$api.insertChannelGoodsCategoryGoods,{params:{channelCategoryId:t.val0,channelGoodsIds:t.addStr}}).then(function(e){1==e.data.flag?(t.$message({type:"success",message:"添加成功。"}),t.getIntroductiosnList()):t.$message({type:"error",message:"添加失败。"})}):t.$message({type:"error",message:"请先在页面顶部选择新增商品所属分类！"})}).catch(function(){t.$message({type:"info",message:"已取消添加"})}):this.$message.error("当前未选中任何行！")},goBack:function(){this.$router.push("/recommendation/asort/goods")}},created:function(){this.getIntroductiosnList(),this.getShopData(),this.getCategoryData(),this.getAllChannelCategory()}}},770:function(t,e,a){var n=a(771);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(20)("88f699aa",n,!1)},771:function(t,e,a){e=t.exports=a(7)(!1),e.push([t.i,"\n.btn-group[data-v-647dc1b5],\n.search-group[data-v-647dc1b5] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-647dc1b5] {\n  float: right;\n}\n.content .content-title[data-v-647dc1b5] {\n  font-size: 18px;\n  font-family: MicrosoftYaHei-Bold;\n  color: #606266;\n  font-weight: bold;\n  margin: 0 10px 20px;\n}\n",""])},772:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[t._v("推荐管理")]),t._v(" "),a("el-breadcrumb",t._l(t.$route.meta.bread,function(e,n){return a("el-breadcrumb-item",{key:n},[t._v(t._s(e))])}))],1),t._v(" "),a("div",{staticClass:"content content1 addcarousel"},[a("div",{staticClass:"content-title"},[t._v("选择新增商品所属分类")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"选择新增商品所属分类",clearable:""},on:{change:t.selectVal0},model:{value:t.val0,callback:function(e){t.val0=e},expression:"val0"}},t._l(t.options0,function(t){return a("el-option",{key:t.value,staticClass:"search-select",attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"content content1 addcarousel"},[a("div",{staticClass:"content-title"},[t._v("选择商品范围")]),t._v(" "),a("div",{staticClass:"search-group"},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索商品名称 / 编号 / 品牌","prefix-icon":"el-icon-search",clearable:""},on:{blur:t.searchVal1},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchVal1(e)}},model:{value:t.val1,callback:function(e){t.val1="string"==typeof e?e.trim():e},expression:"val1"}}),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"选择店铺",clearable:""},on:{change:t.selectVal2},model:{value:t.val2,callback:function(e){t.val2=e},expression:"val2"}},t._l(t.options2,function(t){return a("el-option",{key:t.value,staticClass:"search-select",attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:t.options3,"change-on-select":""},on:{change:t.selectVal3},model:{value:t.val3,callback:function(e){t.val3=e},expression:"val3"}}),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"选择添加状态",clearable:""},on:{change:t.selectVal4},model:{value:t.val4,callback:function(e){t.val4=e},expression:"val4"}},t._l(t.options4,function(t){return a("el-option",{key:t.value,staticClass:"search-select",attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark","default-sort":{prop:"sort_no",order:"descending"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",width:"130px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"编号",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店铺",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"价格（元）",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"grossCommisionAmount",label:"佣金（元）",sortable:"",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsRecommendCount",label:"总推荐数",sortable:"",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hasAdd",label:"添加状态",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("changehasAdd")(e.row.hasAdd))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.checkOrganization(e.row)}}},[t._v("查看")]),t._v(" "),0==e.row.hasAdd?a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.add(e.row,e.$index)}}},[t._v("添加")]):t._e()]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{staticClass:"purple-bg",on:{click:t.AddSelect}},[t._v("批量添加")]),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),a("el-button",{staticClass:"orange-bg",on:{click:t.goBack}},[t._v("返回")])],1)},l=[];n._withStripped=!0;var s={render:n,staticRenderFns:l};e.a=s}});