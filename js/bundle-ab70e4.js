webpackJsonp([15],{288:function(t,e,a){"use strict";function n(t){r||a(587)}Object.defineProperty(e,"__esModule",{value:!0});var l=a(397),o=a.n(l);for(var s in l)"default"!==s&&function(t){a.d(e,t,function(){return l[t]})}(s);var i=a(589),r=!1,c=a(21),u=n,d=c(o.a,i.a,!1,u,"data-v-59a94b9c",null);d.options.__file="src\\component\\admin\\wxapp\\multipleAddHotGoods.vue",e.default=d.exports},397:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={filters:{changeIsUp:function(t){return 1==t?"上架":"下架"}},data:function(){return{query:{pageNum:1,pageSize:20,hasAdd:0},total:0,val1:"",val2:"",val3:"",val4:[],val5:"",val6:0,multipleSelection:[],options3:[],options4:[],options5:[{value:1,label:"上架"},{value:0,label:"下架"}],options6:[{value:1,label:"已添加"},{value:0,label:"未添加"}],tableData:[],currentPage:1}},methods:{addGoods:function(t){var e=this;this.$http.get(this.$api.insertHotGoods,{params:{goodsIds:t.goodsId}}).then(function(t){t.data.flag?(e.$message({type:"success",message:"添加商品成功"}),e.getHotGoodsList()):e.$message({type:"error",message:t.data.msg})})},getCategoryData:function(){var t=this;this.$http.get(this.$api.findGoodsCategoryList).then(function(e){var a=e.data.data,n=function(t){for(var e=t,a=t.length,n=[],l=0;l<a;l++){var o={};if(o.value=e[l].id,o.label=e[l].name,null!=e[l].children){o.childrentemp=e[l].children,o.children=[];for(var s=0;s<o.childrentemp.length;s++){var i={};if(i.value=o.childrentemp[s].id,i.label=o.childrentemp[s].name,o.children.push(i),null!=o.childrentemp[s].children){i.children=[],i.childrentemp=o.childrentemp[s].children;for(var r=0;r<i.childrentemp.length;r++){var c={};c.value=i.childrentemp[r].id,c.label=i.childrentemp[r].name,i.children.push(c)}}}n[l]=o}else n[l]=o}return n}(a);t.options4=n})},getShopData:function(){var t=this;this.$http.get(this.$api.findStoreList).then(function(e){for(var a in e.data.data){var n={};n.value=a,n.label=e.data.data[a],t.options3.push(n)}})},searchVal2:function(){this.query.name=this.val2,this.getHotGoodsList()},selectVal3:function(){this.query.storeId=this.val3,this.getHotGoodsList()},selectVal4:function(){var t=this.val4.length;this.query.goodsCategoryId=this.val4[t-1],this.getHotGoodsList()},selectVal5:function(){this.query.isUp=this.val5,this.getHotGoodsList()},cancel:function(t,e){var a=this;this.$confirm("是否取消推荐该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.get(a.$api.deleteHotGoodsById,{params:{goodsId:t.goodsId}}).then(function(t){t.data.flag?(a.$message({type:"success",message:"取消推荐成功!"}),a.getHotGoodsList()):a.$message({type:"error",message:t.data.msg})})}).catch(function(){a.$message({type:"info",message:"已退出[取消推荐]操作"})})},addSelect:function(){var t=this;0!=this.multipleSelection.length?this.$confirm("是否添加推荐选中的商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="";t.multipleSelection.forEach(function(t,a){e=t.goodsId+","+e}),t.$http.get(t.$api.insertHotGoods,{params:{goodsIds:e}}).then(function(e){e.data.flag?(t.$message({type:"success",message:"添加商品成功!"}),t.getHotGoodsList()):t.$message({type:"error",message:e.data.msg})}),t.$message({type:"warning",message:"取消推荐成功!"})}).catch(function(){t.$message({type:"info",message:"已退出[取消推荐]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},checkgoods:function(t,e){this.$router.push({name:"gcg",params:{goodsId:t.goodsId,storeId:t.storeId,query:this.query}})},handleSelectionChange:function(t){this.multipleSelection=t},handleSizeChange:function(t){this.query.pageSize=t,this.getHotGoodsList()},handleCurrentChange:function(t){this.query.pageNum=t,this.getHotGoodsList()},goBack:function(){this.$router.go(-1)},getHotGoodsList:function(){var t=this;this.$http.get(this.$api.findAllHotGoods,{params:this.query}).then(function(e){t.tableData=e.data.data.list,t.total=e.data.data.total})}},created:function(){this.getHotGoodsList(),this.getShopData(),this.getCategoryData()}}},587:function(t,e,a){var n=a(588);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(20)("22971d26",n,!1)},588:function(t,e,a){e=t.exports=a(7)(!1),e.push([t.i,"\n.btn-group[data-v-59a94b9c],\n.search-group[data-v-59a94b9c] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-59a94b9c] {\n  float: right;\n}\n.up-btn[data-v-59a94b9c] {\n  position: relative;\n}\n.file-upload[data-v-59a94b9c] {\n  position: absolute;\n  background: red;\n  color: #fff;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  cursor: pointer;\n}\n",""])},589:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[t._v("小程序管理")]),t._v(" "),a("el-breadcrumb",t._l(t.$route.meta.bread,function(e,n){return a("el-breadcrumb-item",{key:n},[t._v(t._s(e))])}))],1),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"search-group"},[a("el-input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"搜索商品名称/编号/品牌","prefix-icon":"el-icon-search"},on:{blur:t.searchVal2},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchVal2(e)}},model:{value:t.val2,callback:function(e){t.val2="string"==typeof e?e.trim():e},expression:"val2"}}),t._v(" "),a("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择店铺"},on:{change:t.selectVal3},model:{value:t.val3,callback:function(e){t.val3=e},expression:"val3"}},t._l(t.options3,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:t.options4,"change-on-select":""},on:{change:t.selectVal4},model:{value:t.val4,callback:function(e){t.val4=e},expression:"val4"}}),t._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择销售状态"},on:{change:t.selectVal5},model:{value:t.val5,callback:function(e){t.val5=e},expression:"val5"}},t._l(t.options5,function(t,e){return a("el-option",{key:e,staticClass:"search-select",attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"imageUrl",label:"图片",width:"70"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.imageUrl,width:"52",height:"52"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店铺"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsBrandName",label:"品牌"}}),t._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalPrice",label:"原价(元)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"销售价(元)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"inventory",label:"库存量(件)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsResource.isUp",label:"销售状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("changeIsUp")(e.row.isUp))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.checkgoods(e.row,e.$index)}}},[t._v("查看")]),t._v(" "),0==e.row.isHotGoods?a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){t.addGoods(e.row)}}},[t._v("添加")]):t._e()]}}])})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{staticClass:"orange-bg",on:{click:t.addSelect}},[t._v("批量添加")]),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[20,30,50,100],layout:"total, sizes, prev, pager, next, jumper","page-size":t.query.pageSize,"current-page":t.query.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),a("el-button",{staticClass:"orange-bg mt20",on:{click:t.goBack}},[t._v("返回")])],1)},l=[];n._withStripped=!0;var o={render:n,staticRenderFns:l};e.a=o}});