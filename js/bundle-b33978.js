webpackJsonp([40],{333:function(t,a,s){"use strict";function e(t){r||s(722)}Object.defineProperty(a,"__esModule",{value:!0});var o=s(442),n=s.n(o);for(var i in o)"default"!==i&&function(t){s.d(a,t,function(){return o[t]})}(i);var l=s(724),r=!1,c=s(21),d=e,u=c(n.a,l.a,!1,d,"data-v-113802fb",null);u.options.__file="src\\component\\admin\\recommendation\\setting\\checkGoods.vue",a.default=u.exports},442:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e,o=s(94),n=function(t){return t&&t.__esModule?t:{default:t}}(o);a.default={filters:(e={changeIsUp:function(t){return 1==t?"启用":"停用"}},(0,n.default)(e,"changeIsUp",function(t){return 1==t?"上架":"下架"}),(0,n.default)(e,"changeGoodsAudit",function(t){return 2==t?"通过":3==t?"驳回":"未审核"}),e),data:function(){return{allCommission:"",data:[],ruleForm:{},attrName:[],tableData:[],attrLength:1}},methods:{getGoodsDetail:function(){var t=this,a={};a.channelGoodsId=this.$route.params.channelGoodsId,this.$http.get(this.$api.findChannelGoods,{params:a}).then(function(a){if(a.data.flag){var s=a.data.data;t.ruleForm.sort=t.$route.params.sort,t.data=s,t.attrLength=s.goodsAttributeDtos.length,t.attrName=s.goodsAttributeDtos,t.tableData=s.channelGoodsDetailDto.channelGoodsSkuDetailDtos;var e="";e+=s.commissionRate+"%(￥"+Math.floor(s.commissionRate/100*s.sellingPrice*100)/100+") ",t.allCommission=e;t.tableData.forEach(function(a,s){var e="";e+=a.commissionRate+"%(￥"+Math.floor(a.commissionRate/100*a.sellingPrice*100)/100+") ",t.tableData[s].skuCommission=e})}else t.$message.error(a.data.msg)})},toggleSalesStatus:function(){var t=this;if("1"==this.data.isUp)this.$confirm("是否下架该商品？(注意：下架后商品将无法推荐!)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={};a.channelGoodsIds=t.data.channelGoodsId,a.isUp=0,t.$http.get(t.$api.updateChannelGoodsIsUp,{params:a}).then(function(a){a.data.flag&&(t.getGoodsDetail(),t.$message({type:"warning",message:"下架商品成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消 [下架] 操作"})});else{var a={};a.channelGoodsIds=this.data.channelGoodsId,a.isUp=1,this.$http.get(this.$api.updateChannelGoodsIsUp,{params:a}).then(function(a){a.data.flag&&(t.getGoodsDetail(),t.$message({type:"success",message:"上架商品成功!"}))})}},toggleAppStatus:function(t){var a=this;if(3==t)this.$confirm("是否驳回该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=a.data.channelGoodsId,t.channelGoodsStatus=3,a.$http.get(a.$api.auditChannelGoods,{params:t}).then(function(t){t.data.flag&&(a.getGoodsDetail(),a.$message({type:"warning",message:"驳回商品成功!"}))})}).catch(function(){a.$message({type:"info",message:"已退出[驳回]操作"})});else if(2==t){var s={};s.channelGoodsIds=this.data.channelGoodsId,s.channelGoodsStatus=2,this.$http.get(this.$api.auditChannelGoods,{params:s}).then(function(t){t.data.flag&&(a.getGoodsDetail(),a.$message({type:"success",message:"通过商品成功!"}))})}},add:function(){var t=this,a={};a.channelGoodsIds=this.data.channelGoodsId,this.$http.get(this.$api.addChannelIndexGoodsBatch,{params:a}).then(function(a){a.data.flag?(t.$message.success("添加成功！"),t.$router.go(-1)):t.$message.error(a.data.msg)})},cancel:function(t){var a=this;this.$confirm("是否取消推荐该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.channelGoodsIds=a.data.channelGoodsId,a.$http.get(a.$api.cancelChannelIndexGoodsBatch,{params:t}).then(function(t){t.data.flag&&(a.getIndexData(),a.$message({type:"success",message:"取消推荐商品成功!"}))})}).catch(function(){a.$message({type:"info",message:"已取消 [取消推荐] 操作"})})},editSort:function(){var t=this,a={};a.channelIndexGoodsId=this.$route.params.channelIndexGoodsId,a.sort=this.ruleForm.sort,this.$http.get(this.$api.updateSort,{params:a}).then(function(a){a.data.flag?t.$message({type:"success",message:"修改排序号成功!"}):t.$message({type:"error",message:a.data.msg})})},goBack:function(){this.$router.go(-1)}},created:function(){this.getGoodsDetail()}}},722:function(t,a,s){var e=s(723);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(20)("2fa71d8b",e,!1)},723:function(t,a,s){a=t.exports=s(7)(!1),a.push([t.i,"\n.content .content-title[data-v-113802fb] {\n  font-size: 18px;\n  font-family: MicrosoftYaHei-Bold;\n  color: #606266;\n  font-weight: bold;\n  margin: 0 10px 20px;\n}\n",""])},724:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"breadcrumb"},[s("div",{staticClass:"breadcrumb-head"},[t._v("推荐管理")]),t._v(" "),s("el-breadcrumb",t._l(t.$route.meta.bread,function(a,e){return s("el-breadcrumb-item",{key:e},[t._v(t._s(a))])}))],1),t._v(" "),1!=t.data.hasAdd||t.$route.params.fromGoods?t._e():s("div",{staticClass:"content  mb20"},[s("div",{staticClass:"content-title"},[t._v("首页推荐信息")]),t._v(" "),s("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"60px"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"排序号",prop:"sort"}},[s("el-input",{model:{value:t.ruleForm.sort,callback:function(a){t.$set(t.ruleForm,"sort",a)},expression:"ruleForm.sort"}})],1)],1)],1),t._v(" "),s("el-button",{staticClass:"purple-bg mt20",on:{click:t.editSort}},[t._v("保 存")])],1)],1),t._v(" "),s("div",{staticClass:"content  mb20"},[s("div",{staticClass:"content-title"},[t._v("推荐商品信息")]),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:11}},[s("div",{staticClass:"p10"},[t._v("商品名称："+t._s(t.data.goodsName))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("用户编号："+t._s(t.data.goodsCode))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("所属店铺："+t._s(t.data.storeName))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("商品品牌："+t._s(t.data.goodsBrandName))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("推荐状态：\n          "),s("span",{staticClass:"orange-txt"},[t._v(t._s(t._f("changeIsUp")(t.data.isUp)))])]),t._v(" "),s("div",{staticClass:"p10"},[t._v("审核状态：\n          "),s("span",{staticClass:"orange-txt"},[t._v(t._s(t._f("changeGoodsAudit")(t.data.goodsAudit)))])])]),t._v(" "),s("el-col",{attrs:{span:13}},[s("div",{staticClass:"p10"},[t._v("商品分类："+t._s(t.data.goodsCategoryName))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("商品价格（元）："+t._s(t.data.sellingPrice))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("库存量（件）："+t._s(t.data.inventory))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("佣金比例："+t._s(t.allCommission))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("截止时间：\n          "),s("span",{staticClass:"orange-txt"},[t._v(t._s(t.data.endUseTime))])])])],1)],1),t._v(" "),s("div",{staticClass:"content  mb20"},[s("div",{staticClass:"content-title"},[t._v("商品属性")]),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"}},[s("el-table-column",{attrs:{prop:"specName1",label:t.attrName[0].attributeName}}),t._v(" "),2==t.attrLength?s("el-table-column",{attrs:{prop:"specName2",label:t.attrName[1].attributeName}}):t._e(),t._v(" "),3==t.attrLength?s("el-table-column",{attrs:{prop:"specName3",label:t.attrName[2].attributeName}}):t._e(),t._v(" "),s("el-table-column",{attrs:{prop:"sellingPrice",label:"销售价(元)"}}),t._v(" "),s("el-table-column",{attrs:{prop:"inventory",label:"库存量(件)"}}),t._v(" "),s("el-table-column",{attrs:{prop:"skuCommission",label:"*佣金比例"}})],1)],1),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"content-title"},[t._v("推荐信息")]),t._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:11}},[s("div",{staticClass:"p10"},[t._v("总推荐数："+t._s(t.data.goodsRecommendCount))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("总点击数："+t._s(t.data.goodsClickCount))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("总结算数："+t._s(t.data.goodsSettleCount))])]),t._v(" "),s("el-col",{attrs:{span:13}},[s("div",{staticClass:"p10"},[t._v("总销售额（元）："+t._s(t.data.grossDealAmount))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("总产生佣金（元）："+t._s(t.data.grossCommisionAmount))]),t._v(" "),s("div",{staticClass:"p10"},[t._v("新增时间："+t._s(t.data.createTime))])])],1)],1),t._v(" "),"2"!=t.data.goodsAudit&&t.$route.params.fromGoods?s("el-button",{staticClass:"purple-bg mt20",on:{click:function(a){t.toggleAppStatus(t.flag=2)}}},[t._v("通 过")]):t._e(),t._v(" "),"3"!=t.data.goodsAudit&&t.$route.params.fromGoods?s("el-button",{staticClass:"orange-bg mt20",on:{click:function(a){t.toggleAppStatus(t.flag=3)}}},[t._v("驳 回")]):t._e(),t._v(" "),"0"==t.data.isUp&&"2"==t.data.goodsAudit&&t.$route.params.fromGoods?s("el-button",{staticClass:"purple-bg mt20",on:{click:t.toggleSalesStatus}},[t._v("上 架")]):t._e(),t._v(" "),"1"==t.data.isUp&&"2"==t.data.goodsAudit&&t.$route.params.fromGoods?s("el-button",{staticClass:"orange-bg mt20",on:{click:t.toggleSalesStatus}},[t._v("下 架")]):t._e(),t._v(" "),0!=t.data.hasAdd||t.$route.params.fromGoods?t._e():s("el-button",{staticClass:"purple-bg mt20",on:{click:t.add}},[t._v("添 加")]),t._v(" "),1!=t.data.hasAdd||t.$route.params.fromGoods?t._e():s("el-button",{staticClass:"orange-bg mt20",on:{click:t.cancel}},[t._v("取消推荐")]),t._v(" "),s("el-button",{staticClass:"orange-bg mt20",on:{click:t.goBack}},[t._v("返 回")])],1)},o=[];e._withStripped=!0;var n={render:e,staticRenderFns:o};a.a=n}});