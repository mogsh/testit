webpackJsonp([21],{281:function(e,t,a){"use strict";function n(e){r||a(566)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(390),l=a.n(s);for(var o in s)"default"!==o&&function(e){a.d(t,e,function(){return s[e]})}(o);var i=a(568),r=!1,c=a(21),u=n,d=c(l.a,i.a,!1,u,"data-v-77db823e",null);d.options.__file="src\\component\\admin\\wxapp\\WxNew.vue",t.default=d.exports},390:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(93),l=n(s),o=a(31),i=n(o);t.default={filters:{changeIsUp:function(e){return 1==e?"上架":"下架"}},data:function(){return{query:{pageNum:1,pageSize:20,hasAdd:1},total:0,val1:"",val2:"",val3:"",val4:[],val5:"",val6:1,multipleSelection:[],imgShow:[],imgHide:[],options3:[],options4:[],options5:[{value:"0",label:"下架"},{value:"1",label:"上架"}],options6:[{value:1,label:"已添加"},{value:0,label:"未添加"}],tableData:[],currentPage:1}},methods:{addBtn:function(){this.$router.push("/wxapp/muladdnewgoods")},addGoods:function(e){var t=this;this.$http.get(this.$api.insertNewGoods,{params:{goodsIds:e.goodsId}}).then(function(e){t.$message({type:"success",message:"添加成功!"}),t.getNewGoodsList()})},addSelect:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("是否添加推荐选中的商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t="";e.multipleSelection.forEach(function(e,a){t=e.goodsId+","+t}),e.$http.get(e.$api.insertNewGoods,{params:{goodsIds:t}}).then(function(t){t.data.flag?(e.$message({type:"success",message:"批量添加新品成功!"}),e.getNewGoodsList()):e.$message({type:"error",message:t.data.msg})}),e.$message({type:"warning",message:"取消推荐成功!"})}).catch(function(){e.$message({type:"info",message:"已退出[取消推荐]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},getCategoryData:function(){var e=this;this.$http.get(this.$api.findGoodsCategoryList).then(function(t){var a=t.data.data,n=function(e){for(var t=e,a=e.length,n=[],s=0;s<a;s++){var l={};if(l.value=t[s].id,l.label=t[s].name,null!=t[s].children){l.childrentemp=t[s].children,l.children=[];for(var o=0;o<l.childrentemp.length;o++){var i={};if(i.value=l.childrentemp[o].id,i.label=l.childrentemp[o].name,l.children.push(i),null!=l.childrentemp[o].children){i.children=[],i.childrentemp=l.childrentemp[o].children;for(var r=0;r<i.childrentemp.length;r++){var c={};c.value=i.childrentemp[r].id,c.label=i.childrentemp[r].name,i.children.push(c)}}}n[s]=l}else n[s]=l}return n}(a);e.options4=n})},getShopData:function(){var e=this;this.$http.get(this.$api.findStoreList).then(function(t){var a=t.data.data,n=[],s=[];(0,i.default)(a).forEach(function(e,t){s.push(e)}),(0,l.default)(a).forEach(function(e,t){n.push(e)});for(var o=0;o<n.length;o++){var r={};r.value=s[o],r.label=n[o],e.options3.push(r)}})},adImg:function(){this.$router.push({path:"/wxapp/newadimglist"})},searchVal2:function(){this.query.name=this.val2,this.getNewGoodsList()},selectVal3:function(){this.query.storeId=this.val3,this.getNewGoodsList()},selectVal4:function(){var e=this.val4.length;this.query.goodsCategoryId=this.val4[e-1],this.getNewGoodsList()},selectVal5:function(){this.query.isUp=this.val5,this.getNewGoodsList()},selectVal6:function(){this.query.hasAdd=this.val6,this.getNewGoodsList()},del:function(e,t){var a=this;this.$confirm("是否删除该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.get(a.$api.deleteNewGoodsByGoodsId,{params:{goodsIds:e.goodsId}}).then(function(e){a.$message({type:"success",message:"删除成功!"}),a.getNewGoodsList()})}).catch(function(){a.$message({type:"info",message:"已退出[删除]操作"})})},delSelect:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("是否删除选中的商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t="";e.multipleSelection.forEach(function(e,a){t=e.goodsId+","+t}),e.$http.get(e.$api.deleteNewGoodsByGoodsId,{params:{goodsIds:t}}).then(function(t){t.data.flag?(e.$message({type:"success",message:"删除商品成功!"}),e.getNewGoodsList()):e.$message({type:"error",message:t.data.msg})})}).catch(function(){e.$message({type:"info",message:"已退出[删除]操作"})}):this.$message({type:"error",message:"当前未选中任何行！"})},checkgoods:function(e,t){this.$router.push({name:"gcg",params:{goodsId:e.goodsId,storeId:e.storeId}})},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.query.pageSize=e,this.getNewGoodsList()},handleCurrentChange:function(e){this.query.pageNum=e,this.getNewGoodsList()},getNewGoodsList:function(){var e=this,t=this.val4.length;this.val4[t-1];this.$http.get(this.$api.findNewGoodsListPage,{params:this.query}).then(function(t){e.tableData=t.data.data.list,e.total=t.data.data.total})}},created:function(){this.getNewGoodsList(),this.getShopData(),this.getCategoryData()}}},566:function(e,t,a){var n=a(567);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(20)("ee764d2a",n,!1)},567:function(e,t,a){t=e.exports=a(7)(!1),t.push([e.i,"\n.btn-group[data-v-77db823e],\n.search-group[data-v-77db823e] {\n  margin-bottom: 20px;\n}\n.pagination[data-v-77db823e] {\n  float: right;\n}\n.up-btn[data-v-77db823e] {\n  position: relative;\n}\n.file-upload[data-v-77db823e] {\n  position: absolute;\n  background: red;\n  color: #fff;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  cursor: pointer;\n}\n",""])},568:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"breadcrumb"},[a("div",{staticClass:"breadcrumb-head"},[e._v("小程序管理")]),e._v(" "),a("el-breadcrumb",e._l(e.$route.meta.bread,function(t,n){return a("el-breadcrumb-item",{key:n},[e._v(e._s(t))])}))],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"btn-group"},[a("el-button",{staticClass:"purple-bg",attrs:{icon:"el-icon-plus"},on:{click:e.adImg}},[e._v("新品广告图")]),e._v(" "),a("el-button",{staticClass:"purple-bg",attrs:{icon:"el-icon-plus"},on:{click:e.addBtn}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"search-group"},[a("el-input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"搜索商品名称/编号/品牌","prefix-icon":"el-icon-search"},on:{blur:e.searchVal2},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchVal2(t)}},model:{value:e.val2,callback:function(t){e.val2=t},expression:"val2"}}),e._v(" "),a("el-select",{staticClass:"search-select mb10",attrs:{clearable:"",filterable:"",placeholder:"选择店铺"},on:{change:e.selectVal3},model:{value:e.val3,callback:function(t){e.val3=t},expression:"val3"}},e._l(e.options3,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-cascader",{staticClass:"mb10",attrs:{clearable:"",placeholder:"选择分类","expand-trigger":"click",options:e.options4,"change-on-select":""},on:{change:e.selectVal4},model:{value:e.val4,callback:function(t){e.val4=t},expression:"val4"}}),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择销售状态"},on:{change:e.selectVal5},model:{value:e.val5,callback:function(t){e.val5=t},expression:"val5"}},e._l(e.options5,function(e,t){return a("el-option",{key:t,staticClass:"search-select",attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.imageUrl,width:"52",height:"52"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店铺"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsBrandName",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"originalPrice",label:"原价(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"销售价(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inventory",label:"库存量(件)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isUp",label:"销售状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("changeIsUp")(t.row.isUp))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"purple-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.checkgoods(t.row,t.$index)}}},[e._v("查看")]),e._v(" "),1==e.val6?a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.del(t.row)}}},[e._v("删除")]):a("el-button",{staticClass:"orange-txt",attrs:{type:"text",size:"small"},on:{click:function(a){e.addGoods(t.row)}}},[e._v("添加")])]}}])})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[1==e.val6?a("el-button",{staticClass:"orange-bg",on:{click:e.delSelect}},[e._v("批量删除")]):a("el-button",{staticClass:"orange-bg",on:{click:e.addSelect}},[e._v("批量添加")]),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[20,50,100,200],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)])},s=[];n._withStripped=!0;var l={render:n,staticRenderFns:s};t.a=l}});