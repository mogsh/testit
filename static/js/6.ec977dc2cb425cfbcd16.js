webpackJsonp([6],{MGPJ:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"\n.line[data-v-30d77b44] {\r\n  text-align: center;\n}\n.max-width[data-v-30d77b44] {\r\n  max-width: 600px;\n}\n.max-height[data-v-30d77b44] {\r\n  max-height: 400px;\n}\n#tmap[data-v-30d77b44] {\r\n  min-width: 600px;\r\n  min-height: 600px;\r\n  max-width: 600px;\r\n  max-height: 600px;\n}\r\n",""])},OHVA:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mvHQ"),i=o.n(a),s=o("tnjw"),n=o("TIfe"),l={data:function(){return{dialogVisible1:!1,loginForm:{userName:"",userPassword:""},weyou:{},imgApi:this.$img,fileList:[],select:{province:"广东省",city:"广州市",area:"海珠区"},street:"",form:Object(n.c)(),params:null,dialogImageUrl:"",dialogVisible:!1}},created:function(){console.log(Object(n.c)()),this.street=this.form.address,this.dialogImageUrl=this.form.logo,this.form.weyouStoreId&&(this.weyou={weyouStoreId:this.form.weyouStoreId,weyouStoreName:this.form.weyouStoreName}),this.fileList=[{name:this.form.logo,url:this.form.logo}]},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this,t=this;Object(s.a)("LESBZ-MWHWP-2ARD5-VS75Q-U4UB3-6QBLV").then(function(o){console.log("this.form"),console.log(e.form);var a=new o.maps.LatLng(Number(e.form.lat),Number(e.form.lng));console.log(a);var i=new o.maps.Map(document.getElementById("tmap"),{center:a,zoom:11}),s=new o.maps.Marker({position:a,map:i});s.setVisible(!0),s.setDraggable(!0),o.maps.event.addListener(s,"dragend",function(){console.log(s.getPosition()),a=s.getPosition()}),o.maps.event.addListener(i,"click",function(e){console.log("您点击了地图。位置为==="),console.log("["+e.latLng.getLng()+","+e.latLng.getLat()+"]");var i=e.latLng.getLng(),n=e.latLng.getLat();t.form.lat=n,t.form.lng=i,t.l2a(n,i),a=new o.maps.LatLng(n,i),console.log(a),s.setPosition(a)})})},l2a:function(e,t){var o=this,a={lat:e,lng:t};this.$ajax.get(this.$api.l2a,{params:a}).then(function(e){console.log("latLng2Address"),console.log(e);var t=e.data.result.address_component,a={province:t.province||"",city:t.city||"",district:t.district||"",street:(t.street_number?t.street_number:t.street)||""};o.select={province:a.province,city:a.city,area:a.district},o.street=a.street})},a2l:function(e){var t=this,o={addressDetail:e};this.$ajax.get(this.$api.a2l,{params:o}).then(function(e){console.log("a2l"),console.log(e);var o=e.data.result.location;t.form.lat=o.lat,t.form.lng=o.lng,t.initMap()})},onSelected:function(e){console.log(e),this.street="";var t=e.province.value+e.city.value+e.area.value;this.a2l(t)},onProvince:function(e){console.log(e.value)},onCity:function(e){console.log(e)},onArea:function(e){console.log(e)},onSubmit:function(){var e=this,t=this,o={address:this.street,city:this.select.city,district:this.select.area,province:this.select.province,lat:this.form.lat,lng:this.form.lng,merchantUserId:this.form.merchantUserId,name:this.form.name,slogan:this.form.slogan,tel:this.form.tel,logo:this.form.logo};this.weyou.weyouStoreId&&(o.weyouStoreId=this.weyou.weyouStoreId,o.weyouStoreName=this.weyou.weyouStoreName),console.log("params=============="),console.log(o),this.params=o,this.form.weyouStoreId?t.save(t.params):this.$confirm("未绑定唯柚商家，是否绑定?","提示",{confirmButtonText:"确定绑定",cancelButtonText:"继续保存",type:"warning"}).then(function(){e.dialogVisible1=!0}).catch(function(){t.save(t.params)})},save:function(e){var t=this;this.$ajax.post(this.$api.updateMerchantInfo,i()(e)).then(function(e){if(console.log("保存"),console.log(e),e.flag){t.$message.success("更新信息成功！");var o=e.data;Object(n.h)(o),location.reload()}})},onCancel:function(){this.$message({message:"cancel!",type:"warning"})},bindLogin:function(){var e=this,t=this.loginForm;console.log(this.$weyou),this.$ajax.get(this.$weyou+this.$api.weyoulogin,{params:t}).then(function(t){console.log("绑定登录"),console.log(t);var o=t.data.store;e.weyou={weyouStoreName:o.storeName,weyouStoreId:o.storeId},e.params.weyouStoreName=o.storeName,e.params.weyouStoreId=o.storeId,e.save(e.params),e.dialogVisible1=!1})},uploadImgHandler:function(e){console.log(e),this.form.logo=e.data[0].fileUrl},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url}}},r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container content"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"商户名称"}},[o("el-input",{staticClass:"max-width",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商户广告语"}},[o("el-input",{staticClass:"max-width",attrs:{autosize:{minRows:1,maxRows:10},type:"textarea"},model:{value:e.form.slogan,callback:function(t){e.$set(e.form,"slogan",t)},expression:"form.slogan"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商户电话"}},[o("el-input",{staticClass:"max-width",model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商户地址"}},[o("div",{staticClass:"flex"},[o("v-distpicker",{attrs:{province:e.select.province,city:e.select.city,area:e.select.area},on:{selected:e.onSelected,province:e.onProvince}}),e._v(" "),o("div",{staticClass:"ml20"},[e._v(e._s(e.street))])],1)]),e._v(" "),o("el-form-item",{attrs:{label:"商户位置"}},[o("div",{attrs:{id:"tmap"}})]),e._v(" "),o("el-form-item",{attrs:{label:"商户LOGO"}},[o("el-upload",{attrs:{action:e.imgApi,limit:1,"list-type":"picture-card","file-list":e.fileList,"on-success":e.uploadImgHandler,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[o("i",{staticClass:"el-icon-plus"})]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),o("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"登录绑定唯柚商城",visible:e.dialogVisible1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible1=t}}},[o("el-form",{ref:"form",attrs:{model:e.loginForm,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"账号"}},[o("el-input",{staticClass:"max-width",model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{staticClass:"max-width",attrs:{type:"password"},model:{value:e.loginForm.userPassword,callback:function(t){e.$set(e.loginForm,"userPassword",t)},expression:"loginForm.userPassword"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.bindLogin}},[e._v("确 定")])],1)],1)],1)};r._withStripped=!0;var c={render:r,staticRenderFns:[]},m=c;var d=!1;var u=o("VU/8")(l,m,!1,function(e){d||o("ViVh")},"data-v-30d77b44",null);u.options.__file="src\\views\\merchant\\Info.vue";t.default=u.exports},ViVh:function(e,t,o){var a=o("MGPJ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("58342d07",a,!1)}});