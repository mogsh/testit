import{o as t,c as e,w as i,m as o,a as s,e as r,f as d,F as l,d as n,n as a,b as c,h as u,t as h,i as g,k as p,N as f,g as b,p as _,K as m,l as y,j as k,S as w,r as x,O as C}from"./index.8a89d12b.js";import{_ as v}from"./plugin-vue_export-helper.21dcd24c.js";import{r as S}from"./uni-app.es.42fcfc95.js";import{_ as I}from"./unicloud-db.f2f36ee8.js";var B=v({name:"UniSwiperDot",emits:["clickItem"],props:{info:{type:Array,default:()=>[]},current:{type:Number,default:0},dotsStyles:{type:Object,default:()=>({})},mode:{type:String,default:"default"},field:{type:String,default:""}},data:()=>({dots:{width:6,height:6,bottom:10,color:"#fff",backgroundColor:"rgba(0, 0, 0, .3)",border:"1px rgba(0, 0, 0, .3) solid",selectedBackgroundColor:"#333",selectedBorder:"1px rgba(0, 0, 0, .9) solid"}}),watch:{dotsStyles(t){this.dots=Object.assign(this.dots,this.dotsStyles)},mode(t){"indexes"===t?(this.dots.width=14,this.dots.height=14):(this.dots.width=6,this.dots.height=6)}},created(){"indexes"===this.mode&&(this.dots.width=12,this.dots.height=12),this.dots=Object.assign(this.dots,this.dotsStyles)},methods:{clickItem(t){this.$emit("clickItem",t)}}},[["render",function(f,b,_,m,y,k){const w=g,x=p;return t(),e(w,{class:"uni-swiper__warp"},{default:i((()=>[o(f.$slots,"default",{},void 0,!0),"default"===_.mode?(t(),e(w,{style:s({bottom:y.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"default"},{default:i((()=>[(t(!0),r(l,null,d(_.info,((i,o)=>(t(),e(w,{onClick:t=>k.clickItem(o),style:s({width:(o===_.current?2*y.dots.width:y.dots.width)+"px",height:y.dots.width/2+"px","background-color":o!==_.current?y.dots.backgroundColor:y.dots.selectedBackgroundColor,"border-radius":"0px"}),key:o,class:"uni-swiper__dots-item uni-swiper__dots-bar"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):n("",!0),"dot"===_.mode?(t(),e(w,{style:s({bottom:y.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"dot"},{default:i((()=>[(t(!0),r(l,null,d(_.info,((i,o)=>(t(),e(w,{onClick:t=>k.clickItem(o),style:s({width:y.dots.width+"px",height:y.dots.height+"px","background-color":o!==_.current?y.dots.backgroundColor:y.dots.selectedBackgroundColor,border:o!==_.current?y.dots.border:y.dots.selectedBorder}),key:o,class:"uni-swiper__dots-item"},null,8,["onClick","style"])))),128))])),_:1},8,["style"])):n("",!0),"round"===_.mode?(t(),e(w,{style:s({bottom:y.dots.bottom+"px"}),class:"uni-swiper__dots-box",key:"round"},{default:i((()=>[(t(!0),r(l,null,d(_.info,((i,o)=>(t(),e(w,{onClick:t=>k.clickItem(o),class:a([[o===_.current&&"uni-swiper__dots-long"],"uni-swiper__dots-item"]),style:s({width:(o===_.current?3*y.dots.width:y.dots.width)+"px",height:y.dots.height+"px","background-color":o!==_.current?y.dots.backgroundColor:y.dots.selectedBackgroundColor,border:o!==_.current?y.dots.border:y.dots.selectedBorder}),key:o},null,8,["onClick","class","style"])))),128))])),_:1},8,["style"])):n("",!0),"nav"===_.mode?(t(),e(w,{key:"nav",style:s({"background-color":_.dotsStyles.backgroundColor,bottom:"0"}),class:"uni-swiper__dots-box uni-swiper__dots-nav"},{default:i((()=>[c(x,{style:s({color:_.dotsStyles.color}),class:"uni-swiper__dots-nav-item"},{default:i((()=>[u(h(_.current+1+"/"+_.info.length+" "+_.info[_.current][_.field]),1)])),_:1},8,["style"])])),_:1},8,["style"])):n("",!0),"indexes"===_.mode?(t(),e(w,{key:"indexes",style:s({bottom:y.dots.bottom+"px"}),class:"uni-swiper__dots-box"},{default:i((()=>[(t(!0),r(l,null,d(_.info,((o,r)=>(t(),e(w,{onClick:t=>k.clickItem(r),style:s({width:y.dots.width+"px",height:y.dots.height+"px",color:r===_.current?y.dots.selectedColor:y.dots.color,"background-color":r!==_.current?y.dots.backgroundColor:y.dots.selectedBackgroundColor,border:r!==_.current?y.dots.border:y.dots.selectedBorder}),key:r,class:"uni-swiper__dots-item uni-swiper__dots-indexes"},{default:i((()=>[c(x,{class:"uni-swiper__dots-indexes-text"},{default:i((()=>[u(h(r+1),1)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["style"])):n("",!0)])),_:3})}],["__scopeId","data-v-065ac2b6"]]);var $=v({name:"UniSection",emits:["click"],props:{type:{type:String,default:""},title:{type:String,required:!0,default:""},titleFontSize:{type:String,default:"14px"},titleColor:{type:String,default:"#333"},subTitle:{type:String,default:""},subTitleFontSize:{type:String,default:"12px"},subTitleColor:{type:String,default:"#999"},padding:{type:[Boolean,String],default:!1}},computed:{_padding(){return"string"==typeof this.padding?this.padding:this.padding?"10px":""}},watch:{title(t){uni.report&&""!==t&&uni.report("title",t)}},methods:{onClick(){this.$emit("click")}}},[["render",function(r,d,l,f,b,_){const m=g,y=p;return t(),e(m,{class:"uni-section"},{default:i((()=>[c(m,{class:"uni-section-header",onClick:_.onClick},{default:i((()=>[l.type?(t(),e(m,{key:0,class:a(["uni-section-header__decoration",l.type])},null,8,["class"])):o(r.$slots,"decoration",{key:1},void 0,!0),c(m,{class:"uni-section-header__content"},{default:i((()=>[c(y,{style:s({"font-size":l.titleFontSize,color:l.titleColor}),class:a(["uni-section__content-title",{distraction:!l.subTitle}])},{default:i((()=>[u(h(l.title),1)])),_:1},8,["style","class"]),l.subTitle?(t(),e(y,{key:0,style:s({"font-size":l.subTitleFontSize,color:l.subTitleColor}),class:"uni-section-header__content-sub"},{default:i((()=>[u(h(l.subTitle),1)])),_:1},8,["style"])):n("",!0)])),_:1}),c(m,{class:"uni-section-header__slot-right"},{default:i((()=>[o(r.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["onClick"]),c(m,{class:"uni-section-content",style:s({padding:_._padding})},{default:i((()=>[o(r.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3})}],["__scopeId","data-v-42b13ba1"]]);var T=v({name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:()=>({column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}),created(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy(){this.grid.children.forEach(((t,e)=>{t===this&&this.grid.children.splice(e,1)}))},methods:{_onClick(){this.grid.change({detail:{index:this.index}})}}},[["render",function(r,d,l,u,h,p){const f=g;return h.width?(t(),e(f,{key:0,style:s("width:"+h.width+";"+(h.square?"height:"+h.width:"")),class:"uni-grid-item"},{default:i((()=>[c(f,{class:a([{"uni-grid-item--border":h.showBorder,"uni-grid-item--border-top":h.showBorder&&l.index<h.column,"uni-highlight":h.highlight},"uni-grid-item__box"]),style:s({"border-right-color":h.borderColor,"border-bottom-color":h.borderColor,"border-top-color":h.borderColor}),onClick:p._onClick},{default:i((()=>[o(r.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])])),_:3},8,["style"])):n("",!0)}],["__scopeId","data-v-7319b70a"]]);var D=v({name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide(){return{grid:this}},data:()=>({elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,width:0}),created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init()}))},methods:{init(){setTimeout((()=>{this._getSize((t=>{this.children.forEach(((e,i)=>{e.width=t}))}))}),50)},change(t){this.$emit("change",t)},_getSize(t){f().in(this).select(`#${this.elId}`).boundingClientRect().exec((e=>{this.width=parseInt((e[0].width-1)/this.column)+"px",t(this.width)}))}}},[["render",function(r,d,l,n,u,h){const p=g;return t(),e(p,{class:"uni-grid-wrap"},{default:i((()=>[c(p,{id:u.elId,ref:"uni-grid",class:a(["uni-grid",{"uni-grid--border":l.showBorder}]),style:s({"border-left-color":l.borderColor})},{default:i((()=>[o(r.$slots,"default",{},void 0,!0)])),_:3},8,["id","class","style"])])),_:3})}],["__scopeId","data-v-4b8599c7"]]);var j=v({components:{statusBar:v({name:"UniStatusBar",data:()=>({statusBarHeight:20}),mounted(){this.statusBarHeight=b().statusBarHeight+"px"}},[["render",function(r,d,l,n,a,c){const u=g;return t(),e(u,{style:s({height:a.statusBarHeight}),class:"uni-status-bar"},{default:i((()=>[o(r.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}],["__scopeId","data-v-4fab0372"]])},data:()=>({gridList:[],current:0,swiperDotIndex:0,hasLogin:!1}),onShow(){this.hasLogin=_.getCurrentUserInfo().tokenExpired>Date.now()},onLoad(){let t=[];for(var e=0;e<3;e++)t.push(this.$t("grid.visibleToAll"));for(e=0;e<3;e++)t.push(this.$t("grid.invisibleToTourists"));for(e=0;e<3;e++)t.push(this.$t("grid.adminVisible"));this.gridList=t},methods:{change(t){m({title:this.$t("grid.clickTip")+` ${t.detail.index+1} `+this.$t("grid.clickTipGrid"),icon:"none"})},onqueryload(t){},changeSwiper(t){this.current=t.detail.current},clickItem(t){this.swiperDotIndex=t},clickBannerItem(t){t.open_url&&y({url:"/pages/common/webview/webview?url="+t.open_url+"&title="+t.title,success:t=>{},fail:()=>{},complete:()=>{}})}}},[["render",function(o,s,a,f,b,_){const m=k,y=g,v=C,j=w,L=S(x("uni-swiper-dot"),B),q=S(x("unicloud-db"),I),z=S(x("uni-section"),$),F=p,U=S(x("uni-grid-item"),T),H=S(x("uni-grid"),D);return t(),e(y,{class:"warp"},{default:i((()=>[c(q,{ref:"bannerdb",collection:"opendb-banner",field:"_id,bannerfile,open_url,title",onLoad:_.onqueryload},{default:i((({data:o,loading:s,error:n,options:a})=>[s||o.length?(t(),e(L,{key:1,class:"uni-swiper-dot-box",onClickItem:_.clickItem,info:o,current:b.current,field:"content"},{default:i((()=>[c(j,{class:"swiper-box",onChange:_.changeSwiper,current:b.swiperDotIndex},{default:i((()=>[(t(!0),r(l,null,d(o,((o,s)=>(t(),e(v,{key:o._id},{default:i((()=>[c(y,{class:"swiper-item",onClick:t=>_.clickBannerItem(o)},{default:i((()=>[c(m,{class:"banner-image",src:o.bannerfile.url,mode:"aspectFill",draggable:!1},null,8,["src"])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1032,["onChange","current"])])),_:2},1032,["onClickItem","info","current"])):(t(),e(m,{key:0,class:"banner-image",src:"./static/grid/empty.png",mode:"aspectFill",draggable:!1}))])),_:1},8,["onLoad"]),c(z,{title:o.$t("grid.grid"),style:{margin:"0"},type:"line"},null,8,["title"]),c(y,{class:"example-body"},{default:i((()=>[c(H,{column:3,highlight:!0,onChange:_.change},{default:i((()=>[(t(!0),r(l,null,d(b.gridList,((s,d)=>(t(),r(l,null,[d<3||d>2&&d<6&&b.hasLogin||d>5&&o.uniIDHasRole("admin")?(t(),e(U,{index:d,key:d},{default:i((()=>[c(y,{class:"grid-item-box",style:{"background-color":"#fff"}},{default:i((()=>[c(F,{class:"big-number"},{default:i((()=>[u(h(d+1),1)])),_:2},1024),c(F,{class:"text"},{default:i((()=>[u(h(s),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["index"])):n("",!0)],64)))),256))])),_:1},8,["onChange"])])),_:1})])),_:1})}],["__scopeId","data-v-4df8ce30"]]);export{j as default};
