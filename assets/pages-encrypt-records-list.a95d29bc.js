import{g as t,r as e,o,c as i,w as n,n as l,a,b as s,d as r,e as c,f,h as u,t as h,F as d,i as _,j as m,k as b,p,s as g,l as y}from"./index.8a89d12b.js";import{_ as k,a as C}from"./uni-list.ff4adee6.js";import{r as x}from"./uni-app.es.42fcfc95.js";import{_ as v}from"./uni-load-more.5b2735e4.js";import{_ as w}from"./unicloud-db.f2f36ee8.js";import{_ as B}from"./uni-icons.41c57c15.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";var z=S({name:"UniFab",emits:["fabClick","trigger"],props:{pattern:{type:Object,default:()=>({})},horizontal:{type:String,default:"left"},vertical:{type:String,default:"bottom"},direction:{type:String,default:"horizontal"},content:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},popMenu:{type:Boolean,default:!0}},data:()=>({fabShow:!1,isShow:!1,isAndroidNvue:!1,styles:{color:"#3c3e49",selectedColor:"#007AFF",backgroundColor:"#fff",buttonColor:"#007AFF",iconColor:"#fff"}}),computed:{contentWidth(t){return 55*(this.content.length+1)+15+"px"},contentWidthMin:()=>"55px",boxWidth(){return this.getPosition(3,"horizontal")},boxHeight(){return this.getPosition(3,"vertical")},leftBottom(){return this.getPosition(0,"left","bottom")},rightBottom(){return this.getPosition(0,"right","bottom")},leftTop(){return this.getPosition(0,"left","top")},rightTop(){return this.getPosition(0,"right","top")},flexDirectionStart(){return this.getPosition(1,"vertical","top")},flexDirectionEnd(){return this.getPosition(1,"vertical","bottom")},horizontalLeft(){return this.getPosition(2,"horizontal","left")},horizontalRight(){return this.getPosition(2,"horizontal","right")},nvueBottom:()=>(t().windowBottom,30)},watch:{pattern:{handler(t,e){this.styles=Object.assign({},this.styles,t)},deep:!0}},created(){this.isShow=this.show,0===this.top&&(this.fabShow=!0),this.styles=Object.assign({},this.styles,this.pattern)},methods:{_onClick(){this.$emit("fabClick"),this.popMenu&&(this.isShow=!this.isShow)},open(){this.isShow=!0},close(){this.isShow=!1},_onItemClick(t,e){this.$emit("trigger",{index:t,item:e})},getPosition(t,e,o){return 0===t?this.horizontal===e&&this.vertical===o:1===t?this.direction===e&&this.vertical===o:2===t?this.direction===e&&this.horizontal===o:this.isShow&&this.direction===e?this.contentWidth:this.contentWidthMin}}},[["render",function(t,p,g,y,k,C){const v=_,w=m,S=b,z=x(e("uni-icons"),B);return o(),i(v,{class:"uni-cursor-point"},{default:n((()=>[g.popMenu&&(C.leftBottom||C.rightBottom||C.leftTop||C.rightTop)&&g.content.length>0?(o(),i(v,{key:0,class:l([{"uni-fab--leftBottom":C.leftBottom,"uni-fab--rightBottom":C.rightBottom,"uni-fab--leftTop":C.leftTop,"uni-fab--rightTop":C.rightTop},"uni-fab"]),style:a(C.nvueBottom)},{default:n((()=>[s(v,{class:l([{"uni-fab__content--left":"left"===g.horizontal,"uni-fab__content--right":"right"===g.horizontal,"uni-fab__content--flexDirection":"vertical"===g.direction,"uni-fab__content--flexDirectionStart":C.flexDirectionStart,"uni-fab__content--flexDirectionEnd":C.flexDirectionEnd,"uni-fab__content--other-platform":!k.isAndroidNvue},"uni-fab__content"]),style:a({width:C.boxWidth,height:C.boxHeight,backgroundColor:k.styles.backgroundColor}),elevation:"5"},{default:n((()=>[C.flexDirectionStart||C.horizontalLeft?(o(),i(v,{key:0,class:"uni-fab__item uni-fab__item--first"})):r("",!0),(o(!0),c(d,null,f(g.content,((t,e)=>(o(),i(v,{key:e,class:l([{"uni-fab__item--active":k.isShow},"uni-fab__item"]),onClick:o=>C._onItemClick(e,t)},{default:n((()=>[s(w,{src:t.active?t.selectedIconPath:t.iconPath,class:"uni-fab__item-image",mode:"aspectFit"},null,8,["src"]),s(S,{class:"uni-fab__item-text",style:a({color:t.active?k.styles.selectedColor:k.styles.color})},{default:n((()=>[u(h(t.text),1)])),_:2},1032,["style"])])),_:2},1032,["class","onClick"])))),128)),C.flexDirectionEnd||C.horizontalRight?(o(),i(v,{key:1,class:"uni-fab__item uni-fab__item--first"})):r("",!0)])),_:1},8,["class","style"])])),_:1},8,["class","style"])):r("",!0),s(v,{class:l([{"uni-fab__circle--leftBottom":C.leftBottom,"uni-fab__circle--rightBottom":C.rightBottom,"uni-fab__circle--leftTop":C.leftTop,"uni-fab__circle--rightTop":C.rightTop,"uni-fab__content--other-platform":!k.isAndroidNvue},"uni-fab__circle uni-fab__plus"]),style:a({"background-color":k.styles.buttonColor,bottom:C.nvueBottom}),onClick:C._onClick},{default:n((()=>[s(z,{class:l(["fab-circle-icon",{"uni-fab__plus--active":k.isShow&&g.content.length>0}]),type:"plusempty",color:k.styles.iconColor,size:"32"},null,8,["color","class"])])),_:1},8,["class","style","onClick"])])),_:1})}],["__scopeId","data-v-15731b66"]]);p.database();var P=S({data:()=>({collectionList:"encrypt-records",loadMore:{contentdown:"",contentrefresh:"",contentnomore:""}}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{g()}))},onReachBottom(){this.$refs.udb.loadMore()},onShow(){},methods:{handleItemClick(t){y({url:"./detail?id="+t})},fabClick(){y({url:"./add",events:{refreshData:()=>{this.$refs.udb.loadData({clear:!0})}}})}}},[["render",function(t,l,a,m,p,g){const y=_,B=b,S=x(e("uni-list-item"),C),P=x(e("uni-list"),k),D=x(e("uni-load-more"),v),T=x(e("unicloud-db"),w),j=x(e("uni-fab"),z);return o(),i(y,{class:"container"},{default:n((()=>[s(T,{ref:"udb",collection:p.collectionList,field:"content,remark,extra_remark"},{default:n((({data:t,pagination:e,loading:l,hasMore:a,error:_})=>[_?(o(),i(y,{key:0},{default:n((()=>[u(h(_.message),1)])),_:2},1024)):t?(o(),i(y,{key:1},{default:n((()=>[s(P,null,{default:n((()=>[(o(!0),c(d,null,f(t,((t,e)=>(o(),i(S,{key:e,showArrow:"",clickable:!0,onClick:e=>g.handleItemClick(t._id)},{body:n((()=>[s(y,null,{default:n((()=>[s(y,{class:"text-1-line"},{default:n((()=>[s(B,null,{default:n((()=>[u(h(t.extra_remark),1)])),_:2},1024)])),_:2},1024),s(y,{class:"text-1-line"},{default:n((()=>[s(B,null,{default:n((()=>[u(h(t.remark),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):r("",!0),s(D,{status:l?"loading":a?"more":"noMore"},null,8,["status"])])),_:1},8,["collection"]),s(j,{ref:"fab",horizontal:"right",vertical:"bottom","pop-menu":!1,onFabClick:g.fabClick},null,8,["onFabClick"])])),_:1})}]]);export{P as default};
