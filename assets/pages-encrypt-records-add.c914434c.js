var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,l=(e,l)=>{for(var m in l||(l={}))a.call(l,m)&&r(e,m,l[m]);if(t)for(var m of t(l))o.call(l,m)&&r(e,m,l[m]);return e};import{p as m,J as n,M as s,K as i,X as p,L as u,o as d,c,w as f,b as h,ax as y,ay as b,h as _,r as D,ae as g,i as k}from"./index.8a89d12b.js";import{_ as F}from"./uni-easyinput.64e4af28.js";import{r as C}from"./uni-app.es.42fcfc95.js";import{_ as S}from"./uni-forms-item.cb4a0bc6.js";import{_ as x}from"./uni-forms.c148bd57.js";import{C as j,v as w}from"./index.24f09131.js";import{s as V}from"./store.e01ffa37.js";import{_ as v}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.41c57c15.js";const I=m.database();function O(e){let t={};for(let a in w)e.indexOf(a)>-1&&(t[a]=w[a]);return t}var T=v({data(){let e={content:"",remark:"",extra_remark:""};return{formData:e,tempFormData:{isShowTempArea:!1,tempContent:"",encodeKey:""},formOptions:{},rules:l({},O(Object.keys(e))),tempInputStyle:{color:"#9c8bcd"},tempInputPlaceholderStyle:"color: #7db6bf;"}},onReady(){this.$refs.form.setRules(this.rules)},computed:{userInfo:()=>V.userInfo,hasLogin:()=>V.hasLogin},methods:{openTempForm(){this.tempFormData.isShow=!0},closeTempForm(){this.tempFormData.isShow=!1},tapEncodeData(){let{tempContent:e,encodeKey:t}=this.tempFormData;this.formData.content=function(e,t=""){return j.AES.encrypt(e,t).toString()}(e,t),this.tempFormData={isShowTempArea:!1,tempContent:"",encodeKey:""}},submit(){n({mask:!0}),this.$refs.form.validate().then((e=>(Object.assign(e,{user_name:this.userInfo.username,create_date:(new Date).getTime()}),this.submitForm(e)))).catch((()=>{})).finally((()=>{s()}))},submitForm(e){return I.collection("encrypt-records").add(e).then((e=>{i({icon:"none",title:"新增成功"}),this.getOpenerEventChannel().emit("refreshData"),setTimeout((()=>p()),500)})).catch((e=>{u({content:e.message||"请求服务失败",showCancel:!1})}))}}},[["render",function(e,t,a,o,r,l){const m=C(D("uni-easyinput"),F),n=C(D("uni-forms-item"),S),s=g,i=C(D("uni-forms"),x),p=k;return d(),c(p,{class:"uni-container"},{default:f((()=>[h(i,{ref:"form",labelWidth:"200rpx",model:r.formData,"validate-trigger":"submit","err-show-type":"toast"},{default:f((()=>[h(n,{name:"extra_remark",label:"记录描述"},{default:f((()=>[h(m,{type:"textarea",autoHeight:"",modelValue:r.formData.extra_remark,"onUpdate:modelValue":t[0]||(t[0]=e=>r.formData.extra_remark=e),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1}),h(n,{name:"remark",label:"记录账号",required:""},{default:f((()=>[h(m,{type:"textarea",autoHeight:"",modelValue:r.formData.remark,"onUpdate:modelValue":t[1]||(t[1]=e=>r.formData.remark=e),placeholder:"请输入内容"},null,8,["modelValue"])])),_:1}),y(h(n,{name:"content",label:"加密文本",required:""},{default:f((()=>[h(m,{onClick:l.openTempForm,type:"textarea",autoHeight:"",disabled:"",placeholder:"加密文本",modelValue:r.formData.content,"onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.content=e)},null,8,["onClick","modelValue"]),h(s,{size:"mini",type:"primary",style:{"margin-top":"20rpx"},onClick:l.openTempForm},{default:f((()=>[_("点击修改加密文本")])),_:1},8,["onClick"])])),_:1},512),[[b,!r.tempFormData.isShow]]),y(h(i,{ref:"tempForm",labelWidth:"200rpx",model:r.tempFormData,"validate-trigger":"checkTempForm","err-show-type":"toast"},{default:f((()=>[h(n,{name:"encodeKey",label:"自定密钥",required:""},{default:f((()=>[h(m,{styles:r.tempInputStyle,placeholderStyle:r.tempInputPlaceholderStyle,type:"password",autoHeight:"",modelValue:r.tempFormData.encodeKey,"onUpdate:modelValue":t[3]||(t[3]=e=>r.tempFormData.encodeKey=e),placeholder:"请输入内容"},null,8,["styles","placeholderStyle","modelValue"])])),_:1}),h(n,{name:"tempContent",label:"待转字符",required:""},{default:f((()=>[h(m,{styles:r.tempInputStyle,placeholderStyle:r.tempInputPlaceholderStyle,type:"textarea",autoHeight:"",modelValue:r.tempFormData.tempContent,"onUpdate:modelValue":t[4]||(t[4]=e=>r.tempFormData.tempContent=e),placeholder:"请输入内容"},null,8,["styles","placeholderStyle","modelValue"])])),_:1}),h(n,{name:"content",label:"转换",required:""},{default:f((()=>[h(s,{size:"mini",type:"primary",onClick:l.tapEncodeData},{default:f((()=>[_("使用密钥转换字符")])),_:1},8,["onClick"]),h(s,{size:"mini",type:"default",style:{"margin-left":"20rpx"},onClick:l.closeTempForm},{default:f((()=>[_("取消修改")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),[[b,r.tempFormData.isShow]]),h(p,{class:"uni-button-group"},{default:f((()=>[h(s,{type:"primary",class:"uni-button",onClick:l.submit},{default:f((()=>[_("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})}],["__scopeId","data-v-25d41c70"]]);export{T as default};
