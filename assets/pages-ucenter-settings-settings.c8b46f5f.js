import{g as e,T as t,R as n,Y as i,v as s,K as o,J as a,ah as l,M as r,ai as c,V as u,aj as g,u as d,a1 as p,o as h,c as f,w as m,b as v,d as k,h as I,t as L,r as b,k as S,i as A}from"./index.8a89d12b.js";import{a as $,_ as O}from"./uni-list.ff4adee6.js";import{r as T}from"./uni-app.es.42fcfc95.js";import{s as x,m as _}from"./store.e01ffa37.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.41c57c15.js";function y(){var e=void 0;try{if("iOS"==plus.os.name){var t=0,n=plus.ios.invoke("UIApplication","sharedApplication"),i=plus.ios.invoke(n,"currentUserNotificationSettings");i?(t=i.plusGetAttribute("types"),plus.ios.deleteObject(i)):t=plus.ios.invoke(n,"enabledRemoteNotificationTypes"),plus.ios.deleteObject(n),e=0!=t}else{var s=plus.android.runtimeMainActivity(),o=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");e=plus.android.invoke(o,"isPushTurnedOn",s)}}catch(a){console.error("exception in isTurnedOnPush@dc-push!!")}return e}function C(){try{if("iOS"==plus.os.name){var e=plus.ios.invoke("UIApplication","sharedApplication"),t=plus.ios.invoke("NSURL","URLWithString:","app-settings:");plus.ios.invoke(e,"openURL:",t),plus.ios.deleteObject(t),plus.ios.deleteObject(e)}}catch(n){console.error("exception in settingInIos@dc-push!!")}}var E={isOn:y,iosSetting:C,on:function(){try{if("iOS"==plus.os.name)y()||C();else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOnPush",e)}}catch(n){console.error("exception in turnOnPush@dc-push!!")}},off:function(){try{if("iOS"==plus.os.name);else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOffPush",e)}}catch(n){console.error("exception in trunOffPush@dc-push!!")}},setting:function(){"ios"==e().platform&&C(),"android"==e().platform&&function(){if("android"==e().platform){var t=plus.android.runtimeMainActivity(),n=new(plus.android.importClass("android.content.Intent"))(plus.android.importClass("android.provider.Settings").ACTION_APPLICATION_DETAILS_SETTINGS);t.startActivity(n)}}()}};var N=P({data:()=>({pushServer:E,supportMode:[],pushIsOn:"wait",currentLanguage:"",userInfo:{}}),computed:{hasLogin:()=>x.hasLogin,i18nEnable:()=>t().globalData.config.i18n.enable},onLoad(){this.currentLanguage="en"==n("CURRENT_LANG")?"English":"简体中文",i({title:this.$t("settings.navigationBarTitle")})},onShow(){},methods:{async changeLoginState(){this.hasLogin?await _.logout():s({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"})},startSoterAuthentication(e){console.log(e);let t={fingerPrint:this.$t("settings.fingerPrint"),facial:this.$t("settings.facial")}[e];this.checkIsSoterEnrolledInDevice({checkAuthMode:e,title:t}).then((()=>{console.log(e,t),uni.startSoterAuthentication({requestAuthModes:[e],challenge:"123456",authContent:this.$t("settings.please")+` ${t}`,complete:e=>{console.log(e)},success:e=>{if(console.log(e),0==e.errCode)return o({title:`${t}`+this.$t("settings.successText"),icon:"none"});o({title:this.$t("settings.failTip"),icon:"none"})},fail:e=>{console.log(e),console.log(`认证失败:${e.errCode}`),o({title:this.$t("settings.authFailed"),icon:"none"})}})}))},checkIsSoterEnrolledInDevice({checkAuthMode:e,title:t}){return new Promise(((n,i)=>{uni.checkIsSoterEnrolledInDevice({checkAuthMode:e,success:e=>{if(console.log(e),e.isEnrolled)return n(e);o({title:this.$t("settings.deviceNoOpen")+`${t}`,icon:"none"}),i(e)},fail:e=>{console.log(e),o({title:`${t}`+this.$t("settings.fail"),icon:"none"}),i(e)}})}))},clearTmp(){a({title:this.$t("settings.clearing"),mask:!0}),l({success:e=>{e.fileList.length>0?uni.removeSavedFile({filePath:e.fileList[0].filePath,complete:e=>{console.log(e),r(),o({title:this.$t("settings.clearedSuccessed"),icon:"none"})}}):(r(),o({title:this.$t("settings.clearedSuccessed"),icon:"none"}))},complete:e=>{console.log(e)}})},changeLanguage(){console.log("语言切换"),c({itemList:["English","简体中文"],success:e=>{console.log(e.tapIndex);let i=n("CURRENT_LANG");if(!e.tapIndex&&"zh-Hans"==i||e.tapIndex&&"en"==i){const n=t().globalData;i=n.locale="en"===i?"zh-Hans":"en",u("CURRENT_LANG",i),t().globalData.$i18n.locale=i,this.currentLanguage=e.tapIndex?"简体中文":"English",g&&g(i),d({url:"/pages/list/list",complete:()=>{p("changeLanguage",i)}})}},fail:()=>{},complete:()=>{}})}}},[["render",function(e,t,n,i,s,o){const a=T(b("uni-list-item"),$),l=T(b("uni-list"),O),r=S,c=A;return h(),f(c,{class:"content"},{default:m((()=>[v(l,{class:"mt10",border:!1},{default:m((()=>[v(a,{title:e.$t("settings.userInfo"),to:"/uni_modules/uni-id-pages/pages/userinfo/userinfo",link:"navigateTo"},null,8,["title"]),s.userInfo.mobile?(h(),f(a,{key:0,title:e.$t("settings.changePassword"),to:"/pages/ucenter/login-page/pwd-retrieve/pwd-retrieve?phoneNumber="+s.userInfo.mobile,link:"navigateTo"},null,8,["title","to"])):k("",!0)])),_:1}),v(l,{class:"mt10",border:!1},{default:m((()=>[o.i18nEnable?(h(),f(a,{key:0,title:e.$t("settings.changeLanguage"),onClick:o.changeLanguage,rightText:s.currentLanguage,link:""},null,8,["title","onClick","rightText"])):k("",!0)])),_:1}),v(c,{class:"bottom-back",onClick:o.changeLoginState},{default:m((()=>[o.hasLogin?(h(),f(r,{key:0,class:"bottom-back-text"},{default:m((()=>[I(L(e.$t("settings.logOut")),1)])),_:1})):(h(),f(r,{key:1,class:"bottom-back-text"},{default:m((()=>[I(L(e.$t("settings.login")),1)])),_:1}))])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-043c0701"]]);export{N as default};
